!function(e){var t={};function r(i){if(t[i])return t[i].exports;var n=t[i]={i:i,l:!1,exports:{}};return e[i].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=e,r.c=t,r.d=function(e,t,i){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(i,n,function(t){return e[t]}.bind(null,n));return i},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s="./js/main.js")}({"./js/main.js":
/*!********************!*\
  !*** ./js/main.js ***!
  \********************/
/*! no exports provided */function(e,t,r){"use strict";r.r(t);var i=r(/*! ./utils/ios-vh-fix */"./js/utils/ios-vh-fix.js"),n=r(/*! ./modules/init-scroll-effect.js */"./js/modules/init-scroll-effect.js");window.addEventListener("DOMContentLoaded",(function(){Object(i.iosVhFix)(),window.addEventListener("load",(function(){Object(n.initScrollEffect)()}))}))},"./js/modules/init-scroll-effect.js":
/*!******************************************!*\
  !*** ./js/modules/init-scroll-effect.js ***!
  \******************************************/
/*! exports provided: initScrollEffect */function(e,t,r){"use strict";r.r(t),r.d(t,"initScrollEffect",(function(){return s}));var i=r(/*! ../vendor/curtainsjs */"./js/vendor/curtainsjs/index.mjs"),n=r(/*! ../vendor/text-texture */"./js/vendor/text-texture.js"),s=function(){var e=new i.Curtains({container:"canvas",pixelRatio:Math.min(1.5,window.devicePixelRatio)}),t={value:0,lastValue:0,effect:0};e.onSuccess((function(){var r={list:['normal 400 1em "Archivo Black", sans-serif','normal 300 1em "Merriweather Sans", sans-serif'],loaded:0};r.list.forEach((function(s){document.fonts.load(s).then((function(){if(r.loaded++,r.loaded===r.list.length){var s=new i.ShaderPass(e,{fragmentShader:"\n    #ifdef GL_FRAGMENT_PRECISION_HIGH\n    precision highp float;\n    #else\n    precision mediump float;\n    #endif\n\n    varying vec3 vVertexPosition;\n    varying vec2 vTextureCoord;\n\n    uniform sampler2D uRenderTexture;\n\n    // lerped scroll deltas\n    // negative when scrolling down, positive when scrolling up\n    uniform float uScrollEffect;\n\n    // default to 2.5\n    uniform float uScrollStrength;\n\n\n    void main() {\n        vec2 scrollTextCoords = vTextureCoord;\n        float horizontalStretch;\n\n        // branching on an uniform is ok\n        if(uScrollEffect >= 0.0) {\n            scrollTextCoords.y *= 1.0 + -uScrollEffect * 0.00625 * uScrollStrength;\n            horizontalStretch = sin(scrollTextCoords.y);\n        }\n        else if(uScrollEffect < 0.0) {\n            scrollTextCoords.y += (scrollTextCoords.y - 1.0) * uScrollEffect * 0.00625 * uScrollStrength;\n            horizontalStretch = sin(-1.0 * (1.0 - scrollTextCoords.y));\n        }\n\n        scrollTextCoords.x = scrollTextCoords.x * 2.0 - 1.0;\n        scrollTextCoords.x *= 1.0 + uScrollEffect * 0.0035 * horizontalStretch * uScrollStrength;\n        scrollTextCoords.x = (scrollTextCoords.x + 1.0) * 0.5;\n\n        gl_FragColor = texture2D(uRenderTexture, scrollTextCoords);\n    }\n",depth:!1,uniforms:{scrollEffect:{name:"uScrollEffect",type:"1f",value:t.effect},scrollStrength:{name:"uScrollStrength",type:"1f",value:2.5}}});s.onRender((function(){t.lastValue=t.value,t.value=e.getScrollValues().y,t.delta=Math.max(-30,Math.min(30,t.lastValue-t.value)),t.effect=e.lerp(t.effect,t.delta,.05),s.uniforms.scrollEffect.value=t.effect})),document.querySelectorAll(".text-plane").forEach((function(t){var r=new i.Plane(e,t,{vertexShader:"\n    #ifdef GL_FRAGMENT_PRECISION_HIGH\n    precision highp float;\n    #else\n    precision mediump float;\n    #endif\n\n    // default mandatory variables\n    attribute vec3 aVertexPosition;\n    attribute vec2 aTextureCoord;\n\n    uniform mat4 uMVMatrix;\n    uniform mat4 uPMatrix;\n\n    // custom variables\n    varying vec3 vVertexPosition;\n    varying vec2 vTextureCoord;\n\n    void main() {\n        gl_Position = uPMatrix * uMVMatrix * vec4(aVertexPosition, 1.0);\n\n        // varyings\n        vVertexPosition = aVertexPosition;\n        vTextureCoord = aTextureCoord;\n    }\n",fragmentShader:"\n    #ifdef GL_FRAGMENT_PRECISION_HIGH\n    precision highp float;\n    #else\n    precision mediump float;\n    #endif\n\n    varying vec3 vVertexPosition;\n    varying vec2 vTextureCoord;\n\n    uniform sampler2D uTexture;\n\n    void main( void ) {\n        gl_FragColor = texture2D(uTexture, vTextureCoord);\n    }\n"});new n.TextTexture({plane:r,textElement:r.htmlElement,sampler:"uTexture",resolution:1.5,skipFontLoading:!0})}))}}))}))}))}},"./js/utils/ios-checker.js":
/*!*********************************!*\
  !*** ./js/utils/ios-checker.js ***!
  \*********************************/
/*! exports provided: iosChecker */function(e,t,r){"use strict";r.r(t),r.d(t,"iosChecker",(function(){return i}));var i=function(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}},"./js/utils/ios-vh-fix.js":
/*!********************************!*\
  !*** ./js/utils/ios-vh-fix.js ***!
  \********************************/
/*! exports provided: iosVhFix */function(e,t,r){"use strict";r.r(t),r.d(t,"iosVhFix",(function(){return n}));var i=r(/*! ./ios-checker */"./js/utils/ios-checker.js"),n=function(){if((!window.MSInputMethodContext||!document.documentMode)&&Object(i.iosChecker)()){var e=.01*window.innerHeight;document.documentElement.style.setProperty("--vh","".concat(e,"px")),window.addEventListener("resize",(function(){e=.01*window.innerHeight,document.documentElement.style.setProperty("--vh","".concat(e,"px"))}))}}},"./js/vendor/curtainsjs/camera/Camera.js":
/*!***********************************************!*\
  !*** ./js/vendor/curtainsjs/camera/Camera.js ***!
  \***********************************************/
/*! exports provided: Camera */function(e,t,r){"use strict";r.r(t),r.d(t,"Camera",(function(){return u}));var i=r(/*! ../math/Vec3.js */"./js/vendor/curtainsjs/math/Vec3.js"),n=r(/*! ../math/Mat4.js */"./js/vendor/curtainsjs/math/Mat4.js");function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(n=i.key,a=void 0,a=function(e,t){if("object"!==s(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!==s(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(n,"string"),"symbol"===s(a)?a:String(a)),i)}var n,a}var u=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.fov,s=void 0===r?50:r,o=t.near,u=void 0===o?.1:o,l=t.far,h=void 0===l?150:l,c=t.width,d=t.height,f=t.pixelRatio,p=void 0===f?1:f;a(this,e),this.position=new i.Vec3,this.projectionMatrix=new n.Mat4,this.worldMatrix=new n.Mat4,this.viewMatrix=new n.Mat4,this._shouldUpdate=!1,this.setSize(),this.setPerspective(s,u,h,c,d,p)}var t,r,s;return t=e,(r=[{key:"setFov",value:function(e){e=isNaN(e)?this.fov:parseFloat(e),(e=Math.max(1,Math.min(e,179)))!==this.fov&&(this.fov=e,this.setPosition(),this._shouldUpdate=!0),this.setCSSPerspective()}},{key:"setNear",value:function(e){e=isNaN(e)?this.near:parseFloat(e),(e=Math.max(e,.01))!==this.near&&(this.near=e,this._shouldUpdate=!0)}},{key:"setFar",value:function(e){e=isNaN(e)?this.far:parseFloat(e),(e=Math.max(e,50))!==this.far&&(this.far=e,this._shouldUpdate=!0)}},{key:"setPixelRatio",value:function(e){e!==this.pixelRatio&&(this._shouldUpdate=!0),this.pixelRatio=e}},{key:"setSize",value:function(e,t){e===this.width&&t===this.height||(this._shouldUpdate=!0),this.width=e,this.height=t}},{key:"setPerspective",value:function(e,t,r,i,n,s){this.setPixelRatio(s),this.setSize(i,n),this.setFov(e),this.setNear(t),this.setFar(r),this._shouldUpdate&&this.updateProjectionMatrix()}},{key:"setPosition",value:function(){this.position.set(0,0,1),this.worldMatrix.setFromArray([1,0,0,0,0,1,0,0,0,0,1,0,this.position.x,this.position.y,this.position.z,1]),this.viewMatrix=this.viewMatrix.copy(this.worldMatrix).getInverse()}},{key:"setCSSPerspective",value:function(){this.CSSPerspective=Math.pow(Math.pow(this.width/(2*this.pixelRatio),2)+Math.pow(this.height/(2*this.pixelRatio),2),.5)/Math.tan(.5*this.fov*Math.PI/180)}},{key:"getScreenRatiosFromFov",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=this.position.z;e<t?e-=t:e+=t;var r=this.fov*Math.PI/180,i=2*Math.tan(r/2)*Math.abs(e);return{width:i*this.width/this.height,height:i}}},{key:"updateProjectionMatrix",value:function(){var e=this.width/this.height,t=this.near*Math.tan(Math.PI/180*.5*this.fov),r=2*t,i=e*r,n=-.5*i,s=n+i,a=t-r,o=2*this.near/(s-n),u=2*this.near/(t-a),l=(s+n)/(s-n),h=(t+a)/(t-a),c=-(this.far+this.near)/(this.far-this.near),d=-2*this.far*this.near/(this.far-this.near);this.projectionMatrix.setFromArray([o,0,0,0,0,u,0,0,l,h,c,-1,0,0,d,0])}},{key:"forceUpdate",value:function(){this._shouldUpdate=!0}},{key:"cancelUpdate",value:function(){this._shouldUpdate=!1}}])&&o(t.prototype,r),s&&o(t,s),Object.defineProperty(t,"prototype",{writable:!1}),e}()},"./js/vendor/curtainsjs/core/Curtains.js":
/*!***********************************************!*\
  !*** ./js/vendor/curtainsjs/core/Curtains.js ***!
  \***********************************************/
/*! exports provided: Curtains */function(e,t,r){"use strict";r.r(t),r.d(t,"Curtains",(function(){return l}));var i=r(/*! ./Renderer.js */"./js/vendor/curtainsjs/core/Renderer.js"),n=r(/*! ../utils/ScrollManager.js */"./js/vendor/curtainsjs/utils/ScrollManager.js"),s=r(/*! ../utils/utils.js */"./js/vendor/curtainsjs/utils/utils.js");function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(n=i.key,s=void 0,s=function(e,t){if("object"!==a(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!==a(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(n,"string"),"symbol"===a(s)?s:String(s)),i)}var n,s}var l=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.container,i=t.alpha,n=void 0===i||i,a=t.premultipliedAlpha,u=void 0!==a&&a,l=t.antialias,h=void 0===l||l,c=t.depth,d=void 0===c||c,f=t.failIfMajorPerformanceCaveat,p=void 0===f||f,g=t.preserveDrawingBuffer,m=void 0!==g&&g,v=t.stencil,y=void 0!==v&&v,_=t.autoResize,b=void 0===_||_,x=t.autoRender,w=void 0===x||x,S=t.watchScroll,P=void 0===S||S,k=t.pixelRatio,j=void 0===k?window.devicePixelRatio||1:k,R=t.renderingScale,T=void 0===R?1:R,E=t.production,O=void 0!==E&&E;o(this,e),this.type="Curtains",this._autoResize=b,this._autoRender=w,this._watchScroll=P,this.pixelRatio=j,T=isNaN(T)?1:parseFloat(T),this._renderingScale=Math.max(.25,Math.min(1,T)),this.premultipliedAlpha=u,this.alpha=n,this.antialias=h,this.depth=d,this.failIfMajorPerformanceCaveat=p,this.preserveDrawingBuffer=m,this.stencil=y,this.production=O,this.errors=!1,r?this.setContainer(r):this.production||Object(s.throwWarning)(this.type+": no container provided in the initial parameters. Use setContainer() method to set one later and initialize the WebGL context")}var t,r,a;return t=e,(r=[{key:"setContainer",value:function(e){if(e)if("string"==typeof e)if(e=document.getElementById(e))this.container=e;else{var t=document.createElement("div");t.setAttribute("id","curtains-canvas"),document.body.appendChild(t),this.container=t,this.production||Object(s.throwWarning)('Curtains: no valid container HTML element or ID provided, created a div with "curtains-canvas" ID instead')}else e instanceof Element&&(this.container=e);else{var r=document.createElement("div");r.setAttribute("id","curtains-canvas"),document.body.appendChild(r),this.container=r,this.production||Object(s.throwWarning)('Curtains: no valid container HTML element or ID provided, created a div with "curtains-canvas" ID instead')}this._initCurtains()}},{key:"_initCurtains",value:function(){this.planes=[],this.renderTargets=[],this.shaderPasses=[],this._initRenderer(),this.gl&&(this._initScroll(),this._setSize(),this._addListeners(),this.container.appendChild(this.canvas),console.log("curtains.js - v8.1.3"),this._animationFrameID=null,this._autoRender&&this._animate())}},{key:"_initRenderer",value:function(){var e=this;this.renderer=new i.Renderer({alpha:this.alpha,antialias:this.antialias,premultipliedAlpha:this.premultipliedAlpha,depth:this.depth,failIfMajorPerformanceCaveat:this.failIfMajorPerformanceCaveat,preserveDrawingBuffer:this.preserveDrawingBuffer,stencil:this.stencil,container:this.container,pixelRatio:this.pixelRatio,renderingScale:this._renderingScale,production:this.production,onError:function(){return e._onRendererError()},onSuccess:function(){return e._onRendererSuccess()},onContextLost:function(){return e._onRendererContextLost()},onContextRestored:function(){return e._onRendererContextRestored()},onDisposed:function(){return e._onRendererDisposed()},onSceneChange:function(){return e._keepSync()}}),this.gl=this.renderer.gl,this.canvas=this.renderer.canvas}},{key:"restoreContext",value:function(){this.renderer.restoreContext()}},{key:"_animate",value:function(){this.render(),this._animationFrameID=window.requestAnimationFrame(this._animate.bind(this))}},{key:"enableDrawing",value:function(){this.renderer.enableDrawing()}},{key:"disableDrawing",value:function(){this.renderer.disableDrawing()}},{key:"needRender",value:function(){this.renderer.needRender()}},{key:"nextRender",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.renderer.nextRender.add(e,t)}},{key:"clear",value:function(){this.renderer&&this.renderer.clear()}},{key:"clearDepth",value:function(){this.renderer&&this.renderer.clearDepth()}},{key:"clearColor",value:function(){this.renderer&&this.renderer.clearColor()}},{key:"isWebGL2",value:function(){return!!this.gl&&this.renderer._isWebGL2}},{key:"render",value:function(){this.renderer.nextRender.execute(),(this.renderer.state.drawingEnabled||this.renderer.state.forceRender)&&(this.renderer.state.forceRender&&(this.renderer.state.forceRender=!1),this._onRenderCallback&&this._onRenderCallback(),this.renderer.render())}},{key:"_addListeners",value:function(){this._resizeHandler=null,this._autoResize&&(this._resizeHandler=this.resize.bind(this,!0),window.addEventListener("resize",this._resizeHandler,!1))}},{key:"setPixelRatio",value:function(e,t){this.pixelRatio=parseFloat(Math.max(e,1))||1,this.renderer.setPixelRatio(e),this.resize(t)}},{key:"_setSize",value:function(){this.renderer.setSize(),this._scrollManager.shouldWatch&&(this._scrollManager.xOffset=window.pageXOffset,this._scrollManager.yOffset=window.pageYOffset)}},{key:"getBoundingRect",value:function(){return this.renderer._boundingRect}},{key:"resize",value:function(e){var t=this;this.gl&&(this._setSize(),this.renderer.resize(),this.nextRender((function(){t._onAfterResizeCallback&&e&&t._onAfterResizeCallback()})))}},{key:"_initScroll",value:function(){var e=this;this._scrollManager=new n.ScrollManager({xOffset:window.pageXOffset,yOffset:window.pageYOffset,lastXDelta:0,lastYDelta:0,shouldWatch:this._watchScroll,onScroll:function(t,r){return e._updateScroll(t,r)}})}},{key:"_updateScroll",value:function(e,t){for(var r=0;r<this.planes.length;r++)this.planes[r].watchScroll&&this.planes[r].updateScrollPosition(e,t);this.renderer.needRender(),this._onScrollCallback&&this._onScrollCallback()}},{key:"updateScrollValues",value:function(e,t){this._scrollManager.updateScrollValues(e,t)}},{key:"getScrollDeltas",value:function(){return{x:this._scrollManager.lastXDelta,y:this._scrollManager.lastYDelta}}},{key:"getScrollValues",value:function(){return{x:this._scrollManager.xOffset,y:this._scrollManager.yOffset}}},{key:"_keepSync",value:function(){this.planes=this.renderer.planes,this.shaderPasses=this.renderer.shaderPasses,this.renderTargets=this.renderer.renderTargets}},{key:"lerp",value:function(e,t,r){return Object(s.lerp)(e,t,r)}},{key:"onAfterResize",value:function(e){return e&&(this._onAfterResizeCallback=e),this}},{key:"onError",value:function(e){return e&&(this._onErrorCallback=e),this}},{key:"_onRendererError",value:function(){var e=this;setTimeout((function(){e._onErrorCallback&&!e.errors&&e._onErrorCallback(),e.errors=!0}),0)}},{key:"onSuccess",value:function(e){return e&&(this._onSuccessCallback=e),this}},{key:"_onRendererSuccess",value:function(){var e=this;setTimeout((function(){e._onSuccessCallback&&e._onSuccessCallback()}),0)}},{key:"onContextLost",value:function(e){return e&&(this._onContextLostCallback=e),this}},{key:"_onRendererContextLost",value:function(){this._onContextLostCallback&&this._onContextLostCallback()}},{key:"onContextRestored",value:function(e){return e&&(this._onContextRestoredCallback=e),this}},{key:"_onRendererContextRestored",value:function(){this._onContextRestoredCallback&&this._onContextRestoredCallback()}},{key:"onRender",value:function(e){return e&&(this._onRenderCallback=e),this}},{key:"onScroll",value:function(e){return e&&(this._onScrollCallback=e),this}},{key:"dispose",value:function(){this.renderer.dispose()}},{key:"_onRendererDisposed",value:function(){this._animationFrameID&&window.cancelAnimationFrame(this._animationFrameID),this._resizeHandler&&window.removeEventListener("resize",this._resizeHandler,!1),this._scrollManager&&this._scrollManager.dispose()}}])&&u(t.prototype,r),a&&u(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}();
/***
 Here we create our Curtains object


 params:
 @container (HTML element or string, optional): the container HTML element or ID that will hold our canvas. Could be set later if not passed as parameter here

 (WebGL context parameters)
 @alpha (bool, optional): whether the WebGL context should handle transparency. Default to true.
 @premultipliedAlpha (bool, optional): whether the WebGL context should handle premultiplied alpha. Default to false.
 @antialias (bool, optional): whether the WebGL context should use the default antialiasing. When using render targets, WebGL disables antialiasing, so you can safely set this to false to improve the performance. Default to true.
 @depth (bool, optional): whether the WebGL context should handle depth. Default to true.
 @failIfMajorPerformanceCaveat (bool, optional): whether the WebGL context creation should fail in case of major performance caveat. Default to true.
 @preserveDrawingBuffer (bool, optional): whether the WebGL context should preserve the drawing buffer. Default to false.
 @stencil (bool, optional): whether the WebGL context should handle stencil. Default to false.

 @autoResize (bool, optional): Whether the library should listen to the window resize event and actually resize the scene. Set it to false if you want to handle this by yourself using the resize() method. Default to true.
 @autoRender (bool, optional): Whether the library should create a request animation frame loop to render the scene. Set it to false if you want to handle this by yourself using the render() method. Default to true.
 @watchScroll (bool, optional): Whether the library should listen to the window scroll event. Set it to false if you want to handle this by yourself. Default to true.

 @pixelRatio (float, optional): Defines the pixel ratio value. Use it to limit it on init to increase performance. Default to window.devicePixelRatio.
 @renderingScale (float, optional): Use it to downscale your rendering canvas. May improve performance but will decrease quality. Default to 1 (minimum: 0.25, maximum: 1).

 @production (bool, optional): Whether the library should throw useful console warnings and errors and check shaders and programs compilation status. Default to false.

 returns :
 @this: our Renderer
 ***/},"./js/vendor/curtainsjs/core/DOMMesh.js":
/*!**********************************************!*\
  !*** ./js/vendor/curtainsjs/core/DOMMesh.js ***!
  \**********************************************/
/*! exports provided: DOMMesh */function(e,t,r){"use strict";r.r(t),r.d(t,"DOMMesh",(function(){return g}));var i=r(/*! ./Mesh.js */"./js/vendor/curtainsjs/core/Mesh.js"),n=r(/*! ../math/Vec2.js */"./js/vendor/curtainsjs/math/Vec2.js"),s=r(/*! ../utils/utils.js */"./js/vendor/curtainsjs/utils/utils.js");function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(n=i.key,s=void 0,s=function(e,t){if("object"!==a(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!==a(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(n,"string"),"symbol"===a(s)?s:String(s)),i)}var n,s}function l(e,t){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,i=d(e);if(t){var n=d(this).constructor;r=Reflect.construct(i,arguments,n)}else r=i.apply(this,arguments);return c(this,r)}}function c(e,t){if(t&&("object"===a(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var f=new n.Vec2,p=new n.Vec2,g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&l(e,t)}(a,e);var t,r,i,n=h(a);function a(e,t){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"DOMMesh",u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},l=u.widthSegments,h=u.heightSegments,d=u.renderOrder,f=u.depthTest,p=u.cullFace,g=u.uniforms,m=u.vertexShaderID,v=u.fragmentShaderID,y=u.vertexShader,_=u.fragmentShader,b=u.texturesOptions,x=u.crossOrigin;return o(this,a),m=m||t&&t.getAttribute("data-vs-id"),v=v||t&&t.getAttribute("data-fs-id"),(r=n.call(this,e,i,{widthSegments:l,heightSegments:h,renderOrder:d,depthTest:f,cullFace:p,uniforms:g,vertexShaderID:m,fragmentShaderID:v,vertexShader:y,fragmentShader:_,texturesOptions:b,crossOrigin:x})).gl?(r.htmlElement=t,r.htmlElement&&0!==r.htmlElement.length||r.renderer.production||Object(s.throwWarning)(r.type+": The HTML element you specified does not currently exists in the DOM"),r._setDocumentSizes(),r):c(r)}return t=a,(r=[{key:"_setDocumentSizes",value:function(){var e=this.htmlElement.getBoundingClientRect();this._boundingRect||(this._boundingRect={}),this._boundingRect.document={width:e.width*this.renderer.pixelRatio,height:e.height*this.renderer.pixelRatio,top:e.top*this.renderer.pixelRatio,left:e.left*this.renderer.pixelRatio}}},{key:"getBoundingRect",value:function(){return{width:this._boundingRect.document.width,height:this._boundingRect.document.height,top:this._boundingRect.document.top,left:this._boundingRect.document.left,right:this._boundingRect.document.left+this._boundingRect.document.width,bottom:this._boundingRect.document.top+this._boundingRect.document.height}}},{key:"resize",value:function(){var e=this;this._setDocumentSizes(),"Plane"===this.type&&(this.setPerspective(this.camera.fov,this.camera.near,this.camera.far),this._setWorldSizes(),this._applyWorldPositions());for(var t=0;t<this.textures.length;t++)this.textures[t].resize();this.renderer.nextRender.add((function(){return e._onAfterResizeCallback&&e._onAfterResizeCallback()}))}},{key:"mouseToPlaneCoords",value:function(e){var t=this.scale?this.scale:p.set(1,1),r=f.set((this._boundingRect.document.width-this._boundingRect.document.width*t.x)/2,(this._boundingRect.document.height-this._boundingRect.document.height*t.y)/2),i=this._boundingRect.document.width*t.x/this.renderer.pixelRatio,n=this._boundingRect.document.height*t.y/this.renderer.pixelRatio,s=(this._boundingRect.document.top+r.y)/this.renderer.pixelRatio,a=(this._boundingRect.document.left+r.x)/this.renderer.pixelRatio;return f.set((e.x-a)/i*2-1,1-(e.y-s)/n*2)}},{key:"onAfterResize",value:function(e){return e&&(this._onAfterResizeCallback=e),this}}])&&u(t.prototype,r),i&&u(t,i),Object.defineProperty(t,"prototype",{writable:!1}),a}(i.Mesh)},"./js/vendor/curtainsjs/core/Geometry.js":
/*!***********************************************!*\
  !*** ./js/vendor/curtainsjs/core/Geometry.js ***!
  \***********************************************/
/*! exports provided: Geometry */function(e,t,r){"use strict";r.r(t),r.d(t,"Geometry",(function(){return o}));var i=r(/*! ../utils/utils.js */"./js/vendor/curtainsjs/utils/utils.js");function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(s=i.key,a=void 0,a=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(s,"string"),"symbol"===n(a)?a:String(a)),i)}var s,a}var o=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=(r.program,r.width),a=void 0===n?1:n,o=r.height,u=void 0===o?1:o;if(s(this,e),this.type="Geometry",t&&"Renderer"===t.type){if(!t.gl)return void Object(i.throwError)(this.type+": Renderer WebGL context is undefined",t)}else Object(i.throwError)(this.type+": Renderer not passed as first argument",t);this.renderer=t,this.gl=this.renderer.gl,this.definition={id:a*u+a,width:a,height:u},this.setDefaultAttributes(),this.setVerticesUVs()}var t,r,n;return t=e,(r=[{key:"restoreContext",value:function(e){this.program=null,this.setDefaultAttributes(),this.setVerticesUVs(),this.setProgram(e)}},{key:"setDefaultAttributes",value:function(){this.attributes={vertexPosition:{name:"aVertexPosition",size:3,isActive:!1},textureCoord:{name:"aTextureCoord",size:3,isActive:!1}}}},{key:"setVerticesUVs",value:function(){var e=this.renderer.cache.getGeometryFromID(this.definition.id);e?(this.attributes.vertexPosition.array=e.vertices,this.attributes.textureCoord.array=e.uvs):(this.computeVerticesUVs(),this.renderer.cache.addGeometry(this.definition.id,this.attributes.vertexPosition.array,this.attributes.textureCoord.array))}},{key:"setProgram",value:function(e){this.program=e,this.initAttributes(),this.renderer._isWebGL2?(this._vao=this.gl.createVertexArray(),this.gl.bindVertexArray(this._vao)):this.renderer.extensions.OES_vertex_array_object&&(this._vao=this.renderer.extensions.OES_vertex_array_object.createVertexArrayOES(),this.renderer.extensions.OES_vertex_array_object.bindVertexArrayOES(this._vao)),this.initializeBuffers()}},{key:"initAttributes",value:function(){for(var e in this.attributes){if(this.attributes[e].isActive=this.program.activeAttributes.includes(this.attributes[e].name),!this.attributes[e].isActive)return;this.attributes[e].location=this.gl.getAttribLocation(this.program.program,this.attributes[e].name),this.attributes[e].buffer=this.gl.createBuffer(),this.attributes[e].numberOfItems=this.definition.width*this.definition.height*this.attributes[e].size*2}}},{key:"computeVerticesUVs",value:function(){this.attributes.vertexPosition.array=[],this.attributes.textureCoord.array=[];for(var e=this.attributes.vertexPosition.array,t=this.attributes.textureCoord.array,r=0;r<this.definition.height;r++)for(var i=r/this.definition.height,n=0;n<this.definition.width;n++){var s=n/this.definition.width;t.push(s),t.push(i),t.push(0),e.push(2*(s-.5)),e.push(2*(i-.5)),e.push(0),t.push(s+1/this.definition.width),t.push(i),t.push(0),e.push(2*(s+1/this.definition.width-.5)),e.push(2*(i-.5)),e.push(0),t.push(s),t.push(i+1/this.definition.height),t.push(0),e.push(2*(s-.5)),e.push(2*(i+1/this.definition.height-.5)),e.push(0),t.push(s),t.push(i+1/this.definition.height),t.push(0),e.push(2*(s-.5)),e.push(2*(i+1/this.definition.height-.5)),e.push(0),t.push(s+1/this.definition.width),t.push(i),t.push(0),e.push(2*(s+1/this.definition.width-.5)),e.push(2*(i-.5)),e.push(0),t.push(s+1/this.definition.width),t.push(i+1/this.definition.height),t.push(0),e.push(2*(s+1/this.definition.width-.5)),e.push(2*(i+1/this.definition.height-.5)),e.push(0)}}},{key:"initializeBuffers",value:function(){if(this.attributes){for(var e in this.attributes){if(!this.attributes[e].isActive)return;this.gl.enableVertexAttribArray(this.attributes[e].location),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.attributes[e].buffer),this.gl.bufferData(this.gl.ARRAY_BUFFER,new Float32Array(this.attributes[e].array),this.gl.STATIC_DRAW),this.gl.vertexAttribPointer(this.attributes[e].location,this.attributes[e].size,this.gl.FLOAT,!1,0,0)}this.renderer.state.currentGeometryID=this.definition.id}}},{key:"bindBuffers",value:function(){if(this._vao)this.renderer._isWebGL2?this.gl.bindVertexArray(this._vao):this.renderer.extensions.OES_vertex_array_object.bindVertexArrayOES(this._vao);else for(var e in this.attributes){if(!this.attributes[e].isActive)return;this.gl.enableVertexAttribArray(this.attributes[e].location),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.attributes[e].buffer),this.gl.vertexAttribPointer(this.attributes[e].location,this.attributes[e].size,this.gl.FLOAT,!1,0,0)}this.renderer.state.currentGeometryID=this.definition.id}},{key:"draw",value:function(){this.gl.drawArrays(this.gl.TRIANGLES,0,this.attributes.vertexPosition.numberOfItems)}},{key:"dispose",value:function(){for(var e in this._vao&&(this.renderer._isWebGL2?this.gl.deleteVertexArray(this._vao):this.renderer.extensions.OES_vertex_array_object.deleteVertexArrayOES(this._vao)),this.attributes){if(!this.attributes[e].isActive)return;this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.attributes[e].buffer),this.gl.bufferData(this.gl.ARRAY_BUFFER,1,this.gl.STATIC_DRAW),this.gl.deleteBuffer(this.attributes[e].buffer)}this.attributes=null,this.renderer.state.currentGeometryID=null}}])&&a(t.prototype,r),n&&a(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}()},"./js/vendor/curtainsjs/core/Mesh.js":
/*!*******************************************!*\
  !*** ./js/vendor/curtainsjs/core/Mesh.js ***!
  \*******************************************/
/*! exports provided: Mesh */function(e,t,r){"use strict";r.r(t),r.d(t,"Mesh",(function(){return c}));var i=r(/*! ./Program.js */"./js/vendor/curtainsjs/core/Program.js"),n=r(/*! ./Geometry.js */"./js/vendor/curtainsjs/core/Geometry.js"),s=r(/*! ./Texture.js */"./js/vendor/curtainsjs/core/Texture.js"),a=r(/*! ../loaders/PlaneTextureLoader.js */"./js/vendor/curtainsjs/loaders/PlaneTextureLoader.js"),o=r(/*! ../utils/utils.js */"./js/vendor/curtainsjs/utils/utils.js");function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(n=i.key,s=void 0,s=function(e,t){if("object"!==u(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!==u(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(n,"string"),"symbol"===u(s)?s:String(s)),i)}var n,s}var c=function(){function e(t){var r=this,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Mesh",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},u=a.vertexShaderID,h=a.fragmentShaderID,c=a.vertexShader,d=a.fragmentShader,f=a.uniforms,p=void 0===f?{}:f,g=a.widthSegments,m=void 0===g?1:g,v=a.heightSegments,y=void 0===v?1:v,_=a.renderOrder,b=void 0===_?0:_,x=a.depthTest,w=void 0===x||x,S=a.cullFace,P=void 0===S?"back":S,k=a.texturesOptions,j=void 0===k?{}:k,R=a.crossOrigin,T=void 0===R?"anonymous":R;if(l(this,e),this.type=s,(t=t&&t.renderer||t)&&"Renderer"===t.type||(Object(o.throwError)(this.type+": Curtains not passed as first argument or Curtains Renderer is missing",t),setTimeout((function(){r._onErrorCallback&&r._onErrorCallback()}),0)),this.renderer=t,this.gl=this.renderer.gl,!this.gl)return this.renderer.production||Object(o.throwError)(this.type+": Unable to create a "+this.type+" because the Renderer WebGL context is not defined"),void setTimeout((function(){r._onErrorCallback&&r._onErrorCallback()}),0);this._canDraw=!1,this.renderOrder=b,this._depthTest=w,this.cullFace=P,"back"!==this.cullFace&&"front"!==this.cullFace&&"none"!==this.cullFace&&(this.cullFace="back"),this.textures=[],this._texturesOptions=Object.assign({premultiplyAlpha:!1,anisotropy:1,floatingPoint:"none",wrapS:this.gl.CLAMP_TO_EDGE,wrapT:this.gl.CLAMP_TO_EDGE,minFilter:this.gl.LINEAR,magFilter:this.gl.LINEAR},j),this.crossOrigin=T,!c&&u&&document.getElementById(u)&&(c=document.getElementById(u).innerHTML),!d&&h&&document.getElementById(h)&&(d=document.getElementById(h).innerHTML),this._initMesh(),m=parseInt(m),y=parseInt(y),this._geometry=new n.Geometry(this.renderer,{width:m,height:y}),this._program=new i.Program(this.renderer,{parent:this,vertexShader:c,fragmentShader:d}),this._program.compiled?(this._program.createUniforms(p),this.uniforms=this._program.uniformsManager.uniforms,this._geometry.setProgram(this._program),this.renderer.onSceneChange()):this.renderer.nextRender.add((function(){return r._onErrorCallback&&r._onErrorCallback()}))}var t,r,u;return t=e,(r=[{key:"_initMesh",value:function(){var e=this;this.uuid=Object(o.generateUUID)(),this.loader=new a.PlaneTextureLoader(this.renderer,this,{sourcesLoaded:0,initSourcesToLoad:0,complete:!1,onComplete:function(){e._onReadyCallback&&e._onReadyCallback(),e.renderer.needRender()}}),this.images=[],this.videos=[],this.canvases=[],this.userData={},this._canDraw=!0}},{key:"_restoreContext",value:function(){this._canDraw=!1,this._matrices&&(this._matrices=null),this._program=new i.Program(this.renderer,{parent:this,vertexShader:this._program.vsCode,fragmentShader:this._program.fsCode}),this._program.compiled&&(this._geometry.restoreContext(this._program),this._program.createUniforms(this.uniforms),this.uniforms=this._program.uniformsManager.uniforms,this._programRestored())}},{key:"setRenderTarget",value:function(e){e&&"RenderTarget"===e.type?("Plane"===this.type&&this.renderer.scene.removePlane(this),this.target=e,"Plane"===this.type&&this.renderer.scene.addPlane(this)):this.renderer.production||Object(o.throwWarning)(this.type+": Could not set the render target because the argument passed is not a RenderTarget class object",e)}},{key:"setRenderOrder",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;(e=isNaN(e)?this.renderOrder:parseInt(e))!==this.renderOrder&&(this.renderOrder=e,this.renderer.scene.setPlaneRenderOrder(this))}},{key:"createTexture",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new s.Texture(this.renderer,Object.assign(e,this._texturesOptions));return t.addParent(this),t}},{key:"addTexture",value:function(e){e&&"Texture"===e.type?e.addParent(this):this.renderer.production||Object(o.throwWarning)(this.type+": cannot add ",e," to this "+this.type+" because it is not a valid texture")}},{key:"loadSources",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,n=0;n<e.length;n++)this.loadSource(e[n],t,r,i)}},{key:"loadSource",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0;this.loader.loadSource(e,Object.assign(r,this._texturesOptions),(function(e){i&&i(e)}),(function(e,r){t.renderer.production||Object(o.throwWarning)(t.type+": this HTML tag could not be converted into a texture:",e.tagName),n&&n(e,r)}))}},{key:"loadImage",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0;this.loader.loadImage(e,Object.assign(r,this._texturesOptions),(function(e){i&&i(e)}),(function(e,r){t.renderer.production||Object(o.throwWarning)(t.type+": There has been an error:\n",r,"\nwhile loading this image:\n",e),n&&n(e,r)}))}},{key:"loadVideo",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0;this.loader.loadVideo(e,Object.assign(r,this._texturesOptions),(function(e){i&&i(e)}),(function(e,r){t.renderer.production||Object(o.throwWarning)(t.type+": There has been an error:\n",r,"\nwhile loading this video:\n",e),n&&n(e,r)}))}},{key:"loadCanvas",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;this.loader.loadCanvas(e,Object.assign(t,this._texturesOptions),(function(e){r&&r(e)}))}},{key:"loadImages",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,n=0;n<e.length;n++)this.loadImage(e[n],t,r,i)}},{key:"loadVideos",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,n=0;n<e.length;n++)this.loadVideo(e[n],t,r,i)}},{key:"loadCanvases",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0,i=0;i<e.length;i++)this.loadCanvas(e[i],t,r)}},{key:"playVideos",value:function(){for(var e=this,t=0;t<this.textures.length;t++){var r=this.textures[t];if("video"===r.sourceType){var i=r.source.play();void 0!==i&&i.catch((function(t){e.renderer.production||Object(o.throwWarning)(e.type+": Could not play the video : ",t)}))}}}},{key:"_draw",value:function(){this.renderer.setDepthTest(this._depthTest),this.renderer.setFaceCulling(this.cullFace),this._program.updateUniforms(),this._geometry.bindBuffers(),this.renderer.state.forceBufferUpdate=!1;for(var e=0;e<this.textures.length;e++)if(this.textures[e]._draw(),this.textures[e]._sampler.isActive&&!this.textures[e]._sampler.isTextureBound)return;this._geometry.draw(),this.renderer.state.activeTexture=null,this._onAfterRenderCallback&&this._onAfterRenderCallback()}},{key:"onError",value:function(e){return e&&(this._onErrorCallback=e),this}},{key:"onLoading",value:function(e){return e&&(this._onLoadingCallback=e),this}},{key:"onReady",value:function(e){return e&&(this._onReadyCallback=e),this}},{key:"onRender",value:function(e){return e&&(this._onRenderCallback=e),this}},{key:"onAfterRender",value:function(e){return e&&(this._onAfterRenderCallback=e),this}},{key:"remove",value:function(){this._canDraw=!1,this.target&&this.renderer.bindFrameBuffer(null),this._dispose(),"Plane"===this.type?this.renderer.removePlane(this):"ShaderPass"===this.type&&(this.target&&(this.target._shaderPass=null,this.target.remove(),this.target=null),this.renderer.removeShaderPass(this))}},{key:"_dispose",value:function(){if(this.gl){this._geometry&&this._geometry.dispose(),this.target&&"ShaderPass"===this.type&&(this.renderer.removeRenderTarget(this.target),this.textures.shift());for(var e=0;e<this.textures.length;e++)this.textures[e]._dispose();this.textures=[]}}}])&&h(t.prototype,r),u&&h(t,u),Object.defineProperty(t,"prototype",{writable:!1}),e}()},"./js/vendor/curtainsjs/core/Plane.js":
/*!********************************************!*\
  !*** ./js/vendor/curtainsjs/core/Plane.js ***!
  \********************************************/
/*! exports provided: Plane */function(e,t,r){"use strict";r.r(t),r.d(t,"Plane",(function(){return L}));var i=r(/*! ./DOMMesh.js */"./js/vendor/curtainsjs/core/DOMMesh.js"),n=r(/*! ../camera/Camera.js */"./js/vendor/curtainsjs/camera/Camera.js"),s=r(/*! ../math/Mat4.js */"./js/vendor/curtainsjs/math/Mat4.js"),a=r(/*! ../math/Vec2.js */"./js/vendor/curtainsjs/math/Vec2.js"),o=r(/*! ../math/Vec3.js */"./js/vendor/curtainsjs/math/Vec3.js"),u=r(/*! ../math/Quat.js */"./js/vendor/curtainsjs/math/Quat.js"),l=r(/*! ../utils/utils.js */"./js/vendor/curtainsjs/utils/utils.js");function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(n=i.key,s=void 0,s=function(e,t){if("object"!==h(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!==h(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(n,"string"),"symbol"===h(s)?s:String(s)),i)}var n,s}function f(){return(f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var i=p(e,t);if(i){var n=Object.getOwnPropertyDescriptor(i,t);return n.get?n.get.call(arguments.length<3?e:r):n.value}}).apply(this,arguments)}function p(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_(e)););return e}function g(e,t){return(g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,i=_(e);if(t){var n=_(this).constructor;r=Reflect.construct(i,arguments,n)}else r=i.apply(this,arguments);return v(this,r)}}function v(e,t){if(t&&("object"===h(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return y(e)}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var b=new a.Vec2,x=new o.Vec3,w=new o.Vec3,S=new o.Vec3,P=new o.Vec3,k=new o.Vec3,j=new o.Vec3,R=new o.Vec3,T=new o.Vec3,E=new u.Quat,O=new o.Vec3(.5,.5,0),C=new o.Vec3,M=new o.Vec3,A=new o.Vec3,F=new o.Vec3,D=new a.Vec2,L=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&g(e,t)}(h,e);var t,r,i,a=m(h);function h(e,t){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=i.widthSegments,o=i.heightSegments,u=i.renderOrder,l=i.depthTest,d=i.cullFace,f=i.uniforms,p=i.vertexShaderID,g=i.fragmentShaderID,m=i.vertexShader,_=i.fragmentShader,b=i.texturesOptions,x=i.crossOrigin,w=i.alwaysDraw,S=void 0!==w&&w,P=i.visible,k=void 0===P||P,j=i.transparent,R=void 0!==j&&j,T=i.drawCheckMargins,E=void 0===T?{top:0,right:0,bottom:0,left:0}:T,O=i.autoloadSources,C=void 0===O||O,M=i.watchScroll,A=void 0===M||M,F=i.fov,D=void 0===F?50:F;return c(this,h),(r=a.call(this,e,t,"Plane",{widthSegments:s,heightSegments:o,renderOrder:u,depthTest:l,cullFace:d,uniforms:f,vertexShaderID:p,fragmentShaderID:g,vertexShader:m,fragmentShader:_,texturesOptions:b,crossOrigin:x})).gl?(r.index=r.renderer.planes.length,r.target=null,r.alwaysDraw=S,r._shouldDraw=!0,r.visible=k,r._transparent=R,r.drawCheckMargins=E,r.autoloadSources=C,r.watchScroll=A,r._updateMVMatrix=!1,r.camera=new n.Camera({fov:D,width:r.renderer._boundingRect.width,height:r.renderer._boundingRect.height,pixelRatio:r.renderer.pixelRatio}),r._program.compiled&&(r._initPlane(),r.renderer.scene.addPlane(y(r)),r.renderer.planes.push(y(r))),r):v(r)}return t=h,(r=[{key:"_programRestored",value:function(){this.target&&this.setRenderTarget(this.renderer.renderTargets[this.target.index]),this._initMatrices(),this.setPerspective(this.camera.fov,this.camera.near,this.camera.far),this._setWorldSizes(),this._applyWorldPositions(),this.renderer.scene.addPlane(this);for(var e=0;e<this.textures.length;e++)this.textures[e]._parent=this,this.textures[e]._restoreContext();this._canDraw=!0}},{key:"_initPlane",value:function(){this._initTransformValues(),this._initPositions(),this.setPerspective(this.camera.fov,this.camera.near,this.camera.far),this._initSources()}},{key:"_initTransformValues",value:function(){var e=this;this.rotation=new o.Vec3,this.rotation.onChange((function(){return e._applyRotation()})),this.quaternion=new u.Quat,this.relativeTranslation=new o.Vec3,this.relativeTranslation.onChange((function(){return e._setTranslation()})),this._translation=new o.Vec3,this.scale=new o.Vec3(1),this.scale.onChange((function(){e.scale.z=1,e._applyScale()})),this.transformOrigin=new o.Vec3(.5,.5,0),this.transformOrigin.onChange((function(){e._setWorldTransformOrigin(),e._updateMVMatrix=!0}))}},{key:"resetPlane",value:function(e){this._initTransformValues(),this._setWorldTransformOrigin(),null!==e&&e?(this.htmlElement=e,this.resize()):e||this.renderer.production||Object(l.throwWarning)(this.type+": You are trying to reset a plane with a HTML element that does not exist. The old HTML element will be kept instead.")}},{key:"removeRenderTarget",value:function(){this.target&&(this.renderer.scene.removePlane(this),this.target=null,this.renderer.scene.addPlane(this))}},{key:"_initPositions",value:function(){this._initMatrices(),this._setWorldSizes(),this._applyWorldPositions()}},{key:"_initMatrices",value:function(){var e=new s.Mat4;this._matrices={world:{matrix:e},modelView:{name:"uMVMatrix",matrix:e,location:this.gl.getUniformLocation(this._program.program,"uMVMatrix")},projection:{name:"uPMatrix",matrix:e,location:this.gl.getUniformLocation(this._program.program,"uPMatrix")},modelViewProjection:{matrix:e}}}},{key:"_setPerspectiveMatrix",value:function(){this.camera._shouldUpdate&&(this.renderer.useProgram(this._program),this.gl.uniformMatrix4fv(this._matrices.projection.location,!1,this._matrices.projection.matrix.elements)),this.camera.cancelUpdate()}},{key:"setPerspective",value:function(e,t,r){this.camera.setPerspective(e,t,r,this.renderer._boundingRect.width,this.renderer._boundingRect.height,this.renderer.pixelRatio),this.renderer.state.isContextLost&&this.camera.forceUpdate(),this._matrices.projection.matrix=this.camera.projectionMatrix,this.camera._shouldUpdate&&(this._setWorldSizes(),this._applyWorldPositions(),this._translation.z=this.relativeTranslation.z/this.camera.CSSPerspective),this._updateMVMatrix=this.camera._shouldUpdate}},{key:"_setMVMatrix",value:function(){this._updateMVMatrix&&(this._matrices.world.matrix=this._matrices.world.matrix.composeFromOrigin(this._translation,this.quaternion,this.scale,this._boundingRect.world.transformOrigin),this._matrices.world.matrix.scale({x:this._boundingRect.world.width,y:this._boundingRect.world.height,z:1}),this._matrices.modelView.matrix.copy(this._matrices.world.matrix),this._matrices.modelView.matrix.elements[14]-=this.camera.position.z,this._matrices.modelViewProjection.matrix=this._matrices.projection.matrix.multiply(this._matrices.modelView.matrix),this.alwaysDraw||this._shouldDrawCheck(),this.renderer.useProgram(this._program),this.gl.uniformMatrix4fv(this._matrices.modelView.location,!1,this._matrices.modelView.matrix.elements)),this._updateMVMatrix=!1}},{key:"_setWorldTransformOrigin",value:function(){this._boundingRect.world.transformOrigin=new o.Vec3((2*this.transformOrigin.x-1)*this._boundingRect.world.width,-(2*this.transformOrigin.y-1)*this._boundingRect.world.height,this.transformOrigin.z)}},{key:"_documentToWorldSpace",value:function(e){return w.set(e.x*this.renderer.pixelRatio/this.renderer._boundingRect.width*this._boundingRect.world.ratios.width,-e.y*this.renderer.pixelRatio/this.renderer._boundingRect.height*this._boundingRect.world.ratios.height,e.z)}},{key:"_setWorldSizes",value:function(){var e=this.camera.getScreenRatiosFromFov();this._boundingRect.world={width:this._boundingRect.document.width/this.renderer._boundingRect.width*e.width/2,height:this._boundingRect.document.height/this.renderer._boundingRect.height*e.height/2,ratios:e},this._setWorldTransformOrigin()}},{key:"_setWorldPosition",value:function(){var e=this._boundingRect.document.width/2+this._boundingRect.document.left,t=this._boundingRect.document.height/2+this._boundingRect.document.top,r=this.renderer._boundingRect.width/2+this.renderer._boundingRect.left,i=this.renderer._boundingRect.height/2+this.renderer._boundingRect.top;this._boundingRect.world.top=(i-t)/this.renderer._boundingRect.height*this._boundingRect.world.ratios.height,this._boundingRect.world.left=(e-r)/this.renderer._boundingRect.width*this._boundingRect.world.ratios.width}},{key:"setScale",value:function(e){e.type&&"Vec2"===e.type?(e.sanitizeNaNValuesWith(this.scale).max(b.set(.001,.001)),e.x===this.scale.x&&e.y===this.scale.y||(this.scale.set(e.x,e.y,1),this._applyScale())):this.renderer.production||Object(l.throwWarning)(this.type+": Cannot set scale because the parameter passed is not of Vec2 type:",e)}},{key:"_applyScale",value:function(){for(var e=0;e<this.textures.length;e++)this.textures[e].resize();this._updateMVMatrix=!0}},{key:"setRotation",value:function(e){e.type&&"Vec3"===e.type?(e.sanitizeNaNValuesWith(this.rotation),e.equals(this.rotation)||(this.rotation.copy(e),this._applyRotation())):this.renderer.production||Object(l.throwWarning)(this.type+": Cannot set rotation because the parameter passed is not of Vec3 type:",e)}},{key:"_applyRotation",value:function(){this.quaternion.setFromVec3(this.rotation),this._updateMVMatrix=!0}},{key:"setTransformOrigin",value:function(e){e.type&&"Vec3"===e.type?(e.sanitizeNaNValuesWith(this.transformOrigin),e.equals(this.transformOrigin)||(this.transformOrigin.copy(e),this._setWorldTransformOrigin(),this._updateMVMatrix=!0)):this.renderer.production||Object(l.throwWarning)(this.type+": Cannot set transform origin because the parameter passed is not of Vec3 type:",e)}},{key:"_setTranslation",value:function(){var e=x.set(0,0,0);this.relativeTranslation.equals(e)||(e=this._documentToWorldSpace(this.relativeTranslation)),this._translation.set(this._boundingRect.world.left+e.x,this._boundingRect.world.top+e.y,this.relativeTranslation.z/this.camera.CSSPerspective),this._updateMVMatrix=!0}},{key:"setRelativeTranslation",value:function(e){e.type&&"Vec3"===e.type?(e.sanitizeNaNValuesWith(this.relativeTranslation),e.equals(this.relativeTranslation)||(this.relativeTranslation.copy(e),this._setTranslation())):this.renderer.production||Object(l.throwWarning)(this.type+": Cannot set translation because the parameter passed is not of Vec3 type:",e)}},{key:"_applyWorldPositions",value:function(){this._setWorldPosition(),this._setTranslation()}},{key:"updatePosition",value:function(){this._setDocumentSizes(),this._applyWorldPositions()}},{key:"updateScrollPosition",value:function(e,t){(e||t)&&(this._boundingRect.document.top+=t*this.renderer.pixelRatio,this._boundingRect.document.left+=e*this.renderer.pixelRatio,this._applyWorldPositions())}},{key:"_getIntersection",value:function(e,t){for(var r=t.clone().sub(e),i=e.clone();i.z>-1;)i.add(r);return i}},{key:"_getNearPlaneIntersections",value:function(e,t,r){var i=this._matrices.modelViewProjection.matrix;if(1===r.length)0===r[0]?(t[0]=this._getIntersection(t[1],R.set(.95,1,0).applyMat4(i)),t.push(this._getIntersection(t[3],T.set(-1,-.95,0).applyMat4(i)))):1===r[0]?(t[1]=this._getIntersection(t[0],R.set(-.95,1,0).applyMat4(i)),t.push(this._getIntersection(t[2],T.set(1,-.95,0).applyMat4(i)))):2===r[0]?(t[2]=this._getIntersection(t[3],R.set(-.95,-1,0).applyMat4(i)),t.push(this._getIntersection(t[1],T.set(1,.95,0).applyMat4(i)))):3===r[0]&&(t[3]=this._getIntersection(t[2],R.set(.95,-1,0).applyMat4(i)),t.push(this._getIntersection(t[0],T.set(-1,.95,0).applyMat4(i))));else if(2===r.length)0===r[0]&&1===r[1]?(t[0]=this._getIntersection(t[3],R.set(-1,-.95,0).applyMat4(i)),t[1]=this._getIntersection(t[2],T.set(1,-.95,0).applyMat4(i))):1===r[0]&&2===r[1]?(t[1]=this._getIntersection(t[0],R.set(-.95,1,0).applyMat4(i)),t[2]=this._getIntersection(t[3],T.set(-.95,-1,0).applyMat4(i))):2===r[0]&&3===r[1]?(t[2]=this._getIntersection(t[1],R.set(1,.95,0).applyMat4(i)),t[3]=this._getIntersection(t[0],T.set(-1,.95,0).applyMat4(i))):0===r[0]&&3===r[1]&&(t[0]=this._getIntersection(t[1],R.set(.95,1,0).applyMat4(i)),t[3]=this._getIntersection(t[2],T.set(.95,-1,0).applyMat4(i)));else if(3===r.length){for(var n=0,s=0;s<e.length;s++)r.includes(s)||(n=s);t=[t[n]],0===n?(t.push(this._getIntersection(t[0],R.set(-.95,1,0).applyMat4(i))),t.push(this._getIntersection(t[0],T.set(-1,.95,0).applyMat4(i)))):1===n?(t.push(this._getIntersection(t[0],R.set(.95,1,0).applyMat4(i))),t.push(this._getIntersection(t[0],T.set(1,.95,0).applyMat4(i)))):2===n?(t.push(this._getIntersection(t[0],R.set(.95,-1,0).applyMat4(i))),t.push(this._getIntersection(t[0],T.set(1,-.95,0).applyMat4(i)))):3===n&&(t.push(this._getIntersection(t[0],R.set(-.95,-1,0).applyMat4(i))),t.push(this._getIntersection(t[0],T.set(-1.95,0).applyMat4(i))))}else for(var a=0;a<e.length;a++)t[a][0]=1e4,t[a][1]=1e4;return t}},{key:"_getWorldCoords",value:function(){for(var e=[S.set(-1,1,0),P.set(1,1,0),k.set(1,-1,0),j.set(-1,-1,0)],t=[],r=[],i=0;i<e.length;i++){var n=e[i].applyMat4(this._matrices.modelViewProjection.matrix);t.push(n),Math.abs(n.z)>1&&r.push(i)}r.length&&(t=this._getNearPlaneIntersections(e,t,r));for(var s=1/0,a=-1/0,o=1/0,u=-1/0,l=0;l<t.length;l++){var h=t[l];h.x<s&&(s=h.x),h.x>a&&(a=h.x),h.y<o&&(o=h.y),h.y>u&&(u=h.y)}return{top:u,right:a,bottom:o,left:s}}},{key:"_computeWebGLBoundingRect",value:function(){var e=this._getWorldCoords(),t={top:1-(e.top+1)/2,right:(e.right+1)/2,bottom:1-(e.bottom+1)/2,left:(e.left+1)/2};t.width=t.right-t.left,t.height=t.bottom-t.top,this._boundingRect.worldToDocument={width:t.width*this.renderer._boundingRect.width,height:t.height*this.renderer._boundingRect.height,top:t.top*this.renderer._boundingRect.height+this.renderer._boundingRect.top,left:t.left*this.renderer._boundingRect.width+this.renderer._boundingRect.left,right:t.left*this.renderer._boundingRect.width+this.renderer._boundingRect.left+t.width*this.renderer._boundingRect.width,bottom:t.top*this.renderer._boundingRect.height+this.renderer._boundingRect.top+t.height*this.renderer._boundingRect.height}}},{key:"getWebGLBoundingRect",value:function(){return this._matrices.modelViewProjection?(this._boundingRect.worldToDocument&&!this.alwaysDraw||this._computeWebGLBoundingRect(),this._boundingRect.worldToDocument):this._boundingRect.document}},{key:"_getWebGLDrawRect",value:function(){return this._computeWebGLBoundingRect(),{top:this._boundingRect.worldToDocument.top-this.drawCheckMargins.top,right:this._boundingRect.worldToDocument.right+this.drawCheckMargins.right,bottom:this._boundingRect.worldToDocument.bottom+this.drawCheckMargins.bottom,left:this._boundingRect.worldToDocument.left-this.drawCheckMargins.left}}},{key:"_shouldDrawCheck",value:function(){var e=this,t=this._getWebGLDrawRect();Math.round(t.right)<=this.renderer._boundingRect.left||Math.round(t.left)>=this.renderer._boundingRect.left+this.renderer._boundingRect.width||Math.round(t.bottom)<=this.renderer._boundingRect.top||Math.round(t.top)>=this.renderer._boundingRect.top+this.renderer._boundingRect.height?this._shouldDraw&&(this._shouldDraw=!1,this.renderer.nextRender.add((function(){return e._onLeaveViewCallback&&e._onLeaveViewCallback()}))):(this._shouldDraw||this.renderer.nextRender.add((function(){return e._onReEnterViewCallback&&e._onReEnterViewCallback()})),this._shouldDraw=!0)}},{key:"isDrawn",value:function(){return this._canDraw&&this.visible&&(this._shouldDraw||this.alwaysDraw)}},{key:"enableDepthTest",value:function(e){this._depthTest=e}},{key:"_initSources",value:function(){var e=0;if(this.autoloadSources){var t=this.htmlElement.getElementsByTagName("img"),r=this.htmlElement.getElementsByTagName("video"),i=this.htmlElement.getElementsByTagName("canvas");t.length&&this.loadImages(t),r.length&&this.loadVideos(r),i.length&&this.loadCanvases(i),e=t.length+r.length+i.length}this.loader._setLoaderSize(e),this._canDraw=!0}},{key:"_startDrawing",value:function(){this._canDraw&&(this._onRenderCallback&&this._onRenderCallback(),this.target?this.renderer.bindFrameBuffer(this.target):null===this.renderer.state.scenePassIndex&&this.renderer.bindFrameBuffer(null),this._setPerspectiveMatrix(),this._setMVMatrix(),(this.alwaysDraw||this._shouldDraw)&&this.visible&&this._draw())}},{key:"mouseToPlaneCoords",value:function(e){if(E.setAxisOrder(this.quaternion.axisOrder),E.equals(this.quaternion)&&O.equals(this.transformOrigin))return f(_(h.prototype),"mouseToPlaneCoords",this).call(this,e);var t={x:e.x/(this.renderer._boundingRect.width/this.renderer.pixelRatio)*2-1,y:2*(1-e.y/(this.renderer._boundingRect.height/this.renderer.pixelRatio))-1},r=this.camera.position.clone(),i=C.set(t.x,t.y,-.5);i.unproject(this.camera),i.sub(r).normalize();var n=M.set(0,0,-1);n.applyQuat(this.quaternion).normalize();var s=F.set(0,0,0),a=n.dot(i);if(Math.abs(a)>=1e-4){var o=this._matrices.world.matrix.getInverse().multiply(this.camera.viewMatrix),u=this._boundingRect.world.transformOrigin.clone().add(this._translation),l=A.set(this._translation.x-u.x,this._translation.y-u.y,this._translation.z-u.z);l.applyQuat(this.quaternion),u.add(l);var c=n.dot(u.clone().sub(r))/a;s.copy(r.add(i.multiplyScalar(c))),s.applyMat4(o)}else s.set(1/0,1/0,1/0);return D.set(s.x,s.y)}},{key:"onReEnterView",value:function(e){return e&&(this._onReEnterViewCallback=e),this}},{key:"onLeaveView",value:function(e){return e&&(this._onLeaveViewCallback=e),this}}])&&d(t.prototype,r),i&&d(t,i),Object.defineProperty(t,"prototype",{writable:!1}),h}(i.DOMMesh)},"./js/vendor/curtainsjs/core/Program.js":
/*!**********************************************!*\
  !*** ./js/vendor/curtainsjs/core/Program.js ***!
  \**********************************************/
/*! exports provided: Program */function(e,t,r){"use strict";r.r(t),r.d(t,"Program",(function(){return f}));var i=r(/*! ./Uniforms.js */"./js/vendor/curtainsjs/core/Uniforms.js"),n=r(/*! ../utils/utils.js */"./js/vendor/curtainsjs/utils/utils.js"),s=r(/*! ../shaders/plane.vertex.glsl.js */"./js/vendor/curtainsjs/shaders/plane.vertex.glsl.js"),a=r(/*! ../shaders/plane.fragment.glsl.js */"./js/vendor/curtainsjs/shaders/plane.fragment.glsl.js"),o=r(/*! ../shaders/shaderpass.vertex.glsl.js */"./js/vendor/curtainsjs/shaders/shaderpass.vertex.glsl.js"),u=r(/*! ../shaders/shaderpass.fragment.glsl.js */"./js/vendor/curtainsjs/shaders/shaderpass.fragment.glsl.js");function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(n=i.key,s=void 0,s=function(e,t){if("object"!==l(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!==l(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(n,"string"),"symbol"===l(s)?s:String(s)),i)}var n,s}var d=0,f=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=r.parent,l=r.vertexShader,c=r.fragmentShader;if(h(this,e),this.type="Program",t&&"Renderer"===t.type){if(!t.gl)return void Object(n.throwError)(this.type+": Renderer WebGL context is undefined",t)}else Object(n.throwError)(this.type+": Renderer not passed as first argument",t);this.renderer=t,this.gl=this.renderer.gl,this.parent=i,this.defaultVsCode="Plane"===this.parent.type?s.default:o.default,this.defaultFsCode="Plane"===this.parent.type?a.default:u.default,l?this.vsCode=l:(this.renderer.production||"Plane"!==this.parent.type||Object(n.throwWarning)(this.parent.type+": No vertex shader provided, will use a default one"),this.vsCode=this.defaultVsCode),c?this.fsCode=c:(this.renderer.production||Object(n.throwWarning)(this.parent.type+": No fragment shader provided, will use a default one"),this.fsCode=this.defaultFsCode),this.compiled=!0,this.setupProgram()}var t,r,l;return t=e,(r=[{key:"createShader",value:function(e,t){var r=this.gl.createShader(t);if(this.gl.shaderSource(r,e),this.gl.compileShader(r),!this.renderer.production&&!this.gl.getShaderParameter(r,this.gl.COMPILE_STATUS)){for(var i=t===this.gl.VERTEX_SHADER?"vertex shader":"fragment shader",s=this.gl.getShaderSource(r).split("\n"),a=0;a<s.length;a++)s[a]=a+1+": "+s[a];return s=s.join("\n"),Object(n.throwWarning)(this.type+": Errors occurred while compiling the",i,":\n",this.gl.getShaderInfoLog(r)),Object(n.throwError)(s),Object(n.throwWarning)(this.type+": Will use a default",i),this.createShader(t===this.gl.VERTEX_SHADER?this.defaultVsCode:this.defaultFsCode,t)}return r}},{key:"useNewShaders",value:function(){this.vertexShader=this.createShader(this.vsCode,this.gl.VERTEX_SHADER),this.fragmentShader=this.createShader(this.fsCode,this.gl.FRAGMENT_SHADER),this.vertexShader&&this.fragmentShader||this.renderer.production||Object(n.throwWarning)(this.type+": Unable to find or compile the vertex or fragment shader")}},{key:"setupProgram",value:function(){var e=this.renderer.cache.getProgramFromShaders(this.vsCode,this.fsCode);e?(this.vertexShader=e.vertexShader,this.fragmentShader=e.fragmentShader,this.activeUniforms=e.activeUniforms,this.activeAttributes=e.activeAttributes,this.createProgram()):(this.useNewShaders(),this.compiled&&(this.createProgram(),this.renderer.cache.addProgram(this)))}},{key:"createProgram",value:function(){if(d++,this.id=d,this.program=this.gl.createProgram(),this.gl.attachShader(this.program,this.vertexShader),this.gl.attachShader(this.program,this.fragmentShader),this.gl.linkProgram(this.program),!this.renderer.production&&!this.gl.getProgramParameter(this.program,this.gl.LINK_STATUS))return Object(n.throwWarning)(this.type+": Unable to initialize the shader program: "+this.gl.getProgramInfoLog(this.program)),Object(n.throwWarning)(this.type+": Will use default vertex and fragment shaders"),this.vertexShader=this.createShader(this.defaultVsCode,this.gl.VERTEX_SHADER),this.fragmentShader=this.createShader(this.defaultFsCode,this.gl.FRAGMENT_SHADER),void this.createProgram();if(this.gl.deleteShader(this.vertexShader),this.gl.deleteShader(this.fragmentShader),!this.activeUniforms||!this.activeAttributes){this.activeUniforms={textures:[],textureMatrices:[]};for(var e=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_UNIFORMS),t=0;t<e;t++){var r=this.gl.getActiveUniform(this.program,t);r.type===this.gl.SAMPLER_2D&&this.activeUniforms.textures.push(r.name),r.type===this.gl.FLOAT_MAT4&&"uMVMatrix"!==r.name&&"uPMatrix"!==r.name&&this.activeUniforms.textureMatrices.push(r.name)}this.activeAttributes=[];for(var i=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_ATTRIBUTES),s=0;s<i;s++){var a=this.gl.getActiveAttrib(this.program,s);this.activeAttributes.push(a.name)}}}},{key:"createUniforms",value:function(e){this.uniformsManager=new i.Uniforms(this.renderer,this.program,e),this.setUniforms()}},{key:"setUniforms",value:function(){this.renderer.useProgram(this),this.uniformsManager.setUniforms()}},{key:"updateUniforms",value:function(){this.renderer.useProgram(this),this.uniformsManager.updateUniforms()}}])&&c(t.prototype,r),l&&c(t,l),Object.defineProperty(t,"prototype",{writable:!1}),e}()},"./js/vendor/curtainsjs/core/Renderer.js":
/*!***********************************************!*\
  !*** ./js/vendor/curtainsjs/core/Renderer.js ***!
  \***********************************************/
/*! exports provided: Renderer */function(e,t,r){"use strict";r.r(t),r.d(t,"Renderer",(function(){return l}));var i=r(/*! ./Scene.js */"./js/vendor/curtainsjs/core/Scene.js"),n=r(/*! ../utils/CacheManager.js */"./js/vendor/curtainsjs/utils/CacheManager.js"),s=r(/*! ../utils/CallbackQueueManager.js */"./js/vendor/curtainsjs/utils/CallbackQueueManager.js"),a=r(/*! ../utils/utils.js */"./js/vendor/curtainsjs/utils/utils.js");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(n=i.key,s=void 0,s=function(e,t){if("object"!==o(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!==o(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(n,"string"),"symbol"===o(s)?s:String(s)),i)}var n,s}var l=function(){function e(t){var r=t.alpha,i=t.antialias,n=t.premultipliedAlpha,s=t.depth,o=t.failIfMajorPerformanceCaveat,u=t.preserveDrawingBuffer,l=t.stencil,h=t.container,c=t.pixelRatio,d=t.renderingScale,f=t.production,p=t.onError,g=t.onSuccess,m=t.onContextLost,v=t.onContextRestored,y=t.onDisposed,_=t.onSceneChange;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.type="Renderer",this.alpha=r,this.antialias=i,this.premultipliedAlpha=n,this.depth=s,this.failIfMajorPerformanceCaveat=o,this.preserveDrawingBuffer=u,this.stencil=l,this.container=h,this.pixelRatio=c,this._renderingScale=d,this.production=f,this.onError=p,this.onSuccess=g,this.onContextLost=m,this.onContextRestored=v,this.onDisposed=y,this.onSceneChange=_,this.initState(),this.canvas=document.createElement("canvas");var b={alpha:this.alpha,premultipliedAlpha:this.premultipliedAlpha,antialias:this.antialias,depth:this.depth,failIfMajorPerformanceCaveat:this.failIfMajorPerformanceCaveat,preserveDrawingBuffer:this.preserveDrawingBuffer,stencil:this.stencil};if(this.gl=this.canvas.getContext("webgl2",b),this._isWebGL2=!!this.gl,this.gl||(this.gl=this.canvas.getContext("webgl",b)||this.canvas.getContext("experimental-webgl",b)),!this.gl)return this.production||Object(a.throwWarning)(this.type+": WebGL context could not be created"),this.state.isActive=!1,void(this.onError&&this.onError());this.onSuccess&&this.onSuccess(),this.initRenderer()}var t,r,o;return t=e,(r=[{key:"initState",value:function(){this.state={isActive:!0,isContextLost:!0,drawingEnabled:!0,forceRender:!1,currentProgramID:null,currentGeometryID:null,forceBufferUpdate:!1,depthTest:null,blending:null,cullFace:null,frameBufferID:null,scenePassIndex:null,activeTexture:null,unpackAlignment:null,flipY:null,premultiplyAlpha:null}}},{key:"initCallbackQueueManager",value:function(){this.nextRender=new s.CallbackQueueManager}},{key:"initRenderer",value:function(){this.planes=[],this.renderTargets=[],this.shaderPasses=[],this.state.isContextLost=!1,this.state.maxTextureSize=this.gl.getParameter(this.gl.MAX_TEXTURE_SIZE),this.initCallbackQueueManager(),this.setBlendFunc(),this.setDepthFunc(),this.setDepthTest(!0),this.cache=new n.CacheManager,this.scene=new i.Scene(this),this.getExtensions(),this._contextLostHandler=this.contextLost.bind(this),this.canvas.addEventListener("webglcontextlost",this._contextLostHandler,!1),this._contextRestoredHandler=this.contextRestored.bind(this),this.canvas.addEventListener("webglcontextrestored",this._contextRestoredHandler,!1)}},{key:"getExtensions",value:function(){this.extensions=[],this._isWebGL2?(this.extensions.EXT_color_buffer_float=this.gl.getExtension("EXT_color_buffer_float"),this.extensions.OES_texture_float_linear=this.gl.getExtension("OES_texture_float_linear"),this.extensions.EXT_texture_filter_anisotropic=this.gl.getExtension("EXT_texture_filter_anisotropic"),this.extensions.WEBGL_lose_context=this.gl.getExtension("WEBGL_lose_context")):(this.extensions.OES_vertex_array_object=this.gl.getExtension("OES_vertex_array_object"),this.extensions.OES_texture_float=this.gl.getExtension("OES_texture_float"),this.extensions.OES_texture_float_linear=this.gl.getExtension("OES_texture_float_linear"),this.extensions.OES_texture_half_float=this.gl.getExtension("OES_texture_half_float"),this.extensions.OES_texture_half_float_linear=this.gl.getExtension("OES_texture_half_float_linear"),this.extensions.EXT_texture_filter_anisotropic=this.gl.getExtension("EXT_texture_filter_anisotropic"),this.extensions.OES_element_index_uint=this.gl.getExtension("OES_element_index_uint"),this.extensions.OES_standard_derivatives=this.gl.getExtension("OES_standard_derivatives"),this.extensions.EXT_sRGB=this.gl.getExtension("EXT_sRGB"),this.extensions.WEBGL_depth_texture=this.gl.getExtension("WEBGL_depth_texture"),this.extensions.WEBGL_draw_buffers=this.gl.getExtension("WEBGL_draw_buffers"),this.extensions.WEBGL_lose_context=this.gl.getExtension("WEBGL_lose_context"))}},{key:"contextLost",value:function(e){var t=this;this.state.isContextLost=!0,this.state.isActive&&(e.preventDefault(),this.nextRender.add((function(){return t.onContextLost&&t.onContextLost()})))}},{key:"restoreContext",value:function(){this.state.isActive&&(this.initState(),this.gl&&this.extensions.WEBGL_lose_context?this.extensions.WEBGL_lose_context.restoreContext():(this.gl||this.production?this.extensions.WEBGL_lose_context||this.production||Object(a.throwWarning)(this.type+": Could not restore the context because the restore context extension is not defined"):Object(a.throwWarning)(this.type+": Could not restore the context because the context is not defined"),this.onError&&this.onError()))}},{key:"isContextexFullyRestored",value:function(){for(var e=!0,t=0;t<this.renderTargets.length;t++){this.renderTargets[t].textures[0]._canDraw||(e=!1);break}if(e)for(var r=0;r<this.planes.length;r++){if(!this.planes[r]._canDraw){e=!1;break}for(var i=0;i<this.planes[r].textures.length;i++)if(!this.planes[r].textures[i]._canDraw){e=!1;break}}if(e)for(var n=0;n<this.shaderPasses.length;n++){if(!this.shaderPasses[n]._canDraw){e=!1;break}for(var s=0;s<this.shaderPasses[n].textures.length;s++)if(!this.shaderPasses[n].textures[s]._canDraw){e=!1;break}}return e}},{key:"contextRestored",value:function(){var e=this;this.getExtensions(),this.setBlendFunc(),this.setDepthFunc(),this.setDepthTest(!0),this.cache.clear(),this.scene.initStacks();for(var t=0;t<this.renderTargets.length;t++)this.renderTargets[t]._restoreContext();for(var r=0;r<this.planes.length;r++)this.planes[r]._restoreContext();for(var i=0;i<this.shaderPasses.length;i++)this.shaderPasses[i]._restoreContext();var n=this.nextRender.add((function(){e.isContextexFullyRestored()&&(n.keep=!1,e.state.isContextLost=!1,e.onContextRestored&&e.onContextRestored(),e.onSceneChange(),e.needRender())}),!0)}},{key:"setPixelRatio",value:function(e){this.pixelRatio=e}},{key:"setSize",value:function(){if(this.gl){var e=this.container.getBoundingClientRect();this._boundingRect={width:e.width*this.pixelRatio,height:e.height*this.pixelRatio,top:e.top*this.pixelRatio,left:e.left*this.pixelRatio};var t=!!navigator.userAgent.match(/Version\/[\d\.]+.*Safari/),r=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream;t&&r&&(this._boundingRect.top=function(e){for(var t=0;e&&!isNaN(e.offsetTop);)t+=e.offsetTop-e.scrollTop,e=e.offsetParent;return t}(this.container)*this.pixelRatio),this.canvas.style.width=Math.floor(this._boundingRect.width/this.pixelRatio)+"px",this.canvas.style.height=Math.floor(this._boundingRect.height/this.pixelRatio)+"px",this.canvas.width=Math.floor(this._boundingRect.width*this._renderingScale),this.canvas.height=Math.floor(this._boundingRect.height*this._renderingScale),this.gl.viewport(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight)}}},{key:"resize",value:function(){for(var e=0;e<this.planes.length;e++)this.planes[e]._canDraw&&this.planes[e].resize();for(var t=0;t<this.shaderPasses.length;t++)this.shaderPasses[t]._canDraw&&this.shaderPasses[t].resize();for(var r=0;r<this.renderTargets.length;r++)this.renderTargets[r].resize();this.needRender()}},{key:"clear",value:function(){this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT)}},{key:"clearDepth",value:function(){this.gl.clear(this.gl.DEPTH_BUFFER_BIT)}},{key:"clearColor",value:function(){this.gl.clear(this.gl.COLOR_BUFFER_BIT)}},{key:"bindFrameBuffer",value:function(e,t){var r=null;e?(r=e.index)!==this.state.frameBufferID&&(this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,e._frameBuffer),this.gl.viewport(0,0,e._size.width,e._size.height),e._shouldClear&&!t&&this.clear()):null!==this.state.frameBufferID&&(this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,null),this.gl.viewport(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight)),this.state.frameBufferID=r}},{key:"setDepthTest",value:function(e){e&&!this.state.depthTest?(this.state.depthTest=e,this.gl.enable(this.gl.DEPTH_TEST)):!e&&this.state.depthTest&&(this.state.depthTest=e,this.gl.disable(this.gl.DEPTH_TEST))}},{key:"setDepthFunc",value:function(){this.gl.depthFunc(this.gl.LEQUAL)}},{key:"setBlending",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e&&!this.state.blending?(this.state.blending=e,this.gl.enable(this.gl.BLEND)):!e&&this.state.blending&&(this.state.blending=e,this.gl.disable(this.gl.BLEND))}},{key:"setBlendFunc",value:function(){this.gl.enable(this.gl.BLEND),this.premultipliedAlpha?this.gl.blendFuncSeparate(this.gl.ONE,this.gl.ONE_MINUS_SRC_ALPHA,this.gl.ONE,this.gl.ONE_MINUS_SRC_ALPHA):this.gl.blendFuncSeparate(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA,this.gl.ONE,this.gl.ONE_MINUS_SRC_ALPHA)}},{key:"setFaceCulling",value:function(e){if(this.state.cullFace!==e)if(this.state.cullFace=e,"none"===e)this.gl.disable(this.gl.CULL_FACE);else{var t="front"===e?this.gl.FRONT:this.gl.BACK;this.gl.enable(this.gl.CULL_FACE),this.gl.cullFace(t)}}},{key:"useProgram",value:function(e){null!==this.state.currentProgramID&&this.state.currentProgramID===e.id||(this.gl.useProgram(e.program),this.state.currentProgramID=e.id)}},{key:"removePlane",value:function(e){this.gl&&(this.planes=this.planes.filter((function(t){return t.uuid!==e.uuid})),this.scene.removePlane(e),e=null,this.gl&&this.clear(),this.onSceneChange())}},{key:"removeRenderTarget",value:function(e){if(this.gl){for(var t=this.planes.find((function(t){return"PingPongPlane"!==t.type&&t.target&&t.target.uuid===e.uuid})),r=0;r<this.planes.length;r++)this.planes[r].target&&this.planes[r].target.uuid===e.uuid&&(this.planes[r].target=null);this.renderTargets=this.renderTargets.filter((function(t){return t.uuid!==e.uuid}));for(var i=0;i<this.renderTargets.length;i++)this.renderTargets[i].index=i;e=null,this.gl&&this.clear(),t&&this.scene.resetPlaneStacks(),this.onSceneChange()}}},{key:"removeShaderPass",value:function(e){this.gl&&(this.shaderPasses=this.shaderPasses.filter((function(t){return t.uuid!==e.uuid})),this.scene.removeShaderPass(e),e=null,this.gl&&this.clear(),this.onSceneChange())}},{key:"enableDrawing",value:function(){this.state.drawingEnabled=!0}},{key:"disableDrawing",value:function(){this.state.drawingEnabled=!1}},{key:"needRender",value:function(){this.state.forceRender=!0}},{key:"render",value:function(){this.gl&&(this.clear(),this.state.currentGeometryID=null,this.scene.draw())}},{key:"deletePrograms",value:function(){for(var e=0;e<this.cache.programs.length;e++){var t=this.cache.programs[e];this.gl.deleteProgram(t.program)}}},{key:"dispose",value:function(){var e=this;if(this.gl){for(this.state.isActive=!1;this.planes.length>0;)this.removePlane(this.planes[0]);for(;this.shaderPasses.length>0;)this.removeShaderPass(this.shaderPasses[0]);for(;this.renderTargets.length>0;)this.removeRenderTarget(this.renderTargets[0]);var t=this.nextRender.add((function(){0===e.planes.length&&0===e.shaderPasses.length&&0===e.renderTargets.length&&(t.keep=!1,e.deletePrograms(),e.clear(),e.canvas.removeEventListener("webgllost",e._contextLostHandler,!1),e.canvas.removeEventListener("webglrestored",e._contextRestoredHandler,!1),e.gl&&e.extensions.WEBGL_lose_context&&e.extensions.WEBGL_lose_context.loseContext(),e.canvas.width=e.canvas.width,e.gl=null,e.container.removeChild(e.canvas),e.container=null,e.canvas=null,e.onDisposed&&e.onDisposed())}),!0)}}}])&&u(t.prototype,r),o&&u(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}()},"./js/vendor/curtainsjs/core/Scene.js":
/*!********************************************!*\
  !*** ./js/vendor/curtainsjs/core/Scene.js ***!
  \********************************************/
/*! exports provided: Scene */function(e,t,r){"use strict";r.r(t),r.d(t,"Scene",(function(){return a}));var i=r(/*! ../utils/utils.js */"./js/vendor/curtainsjs/utils/utils.js");function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(s=i.key,a=void 0,a=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(s,"string"),"symbol"===n(a)?a:String(a)),i)}var s,a}var a=function(){function e(t){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.type="Scene",t&&"Renderer"===t.type){if(!t.gl)return void Object(i.throwError)(this.type+": Renderer WebGL context is undefined",t)}else Object(i.throwError)(this.type+": Renderer not passed as first argument",t);this.renderer=t,this.gl=t.gl,this.initStacks()}var t,r,n;return t=e,(r=[{key:"initStacks",value:function(){this.stacks={pingPong:[],renderTargets:[],opaque:[],transparent:[],renderPasses:[],scenePasses:[]}}},{key:"resetPlaneStacks",value:function(){this.stacks.pingPong=[],this.stacks.renderTargets=[],this.stacks.opaque=[],this.stacks.transparent=[];for(var e=0;e<this.renderer.planes.length;e++)this.addPlane(this.renderer.planes[e])}},{key:"resetShaderPassStacks",value:function(){this.stacks.scenePasses=[],this.stacks.renderPasses=[];for(var e=0;e<this.renderer.shaderPasses.length;e++)this.renderer.shaderPasses[e].index=e,this.renderer.shaderPasses[e]._isScenePass?this.stacks.scenePasses.push(this.renderer.shaderPasses[e]):this.stacks.renderPasses.push(this.renderer.shaderPasses[e]);0===this.stacks.scenePasses.length&&(this.renderer.state.scenePassIndex=null)}},{key:"addToRenderTargetsStack",value:function(e){var t=this.renderer.planes.filter((function(t){return"PingPongPlane"!==t.type&&t.target&&t.uuid!==e.uuid})),r=-1;if(e.target._depth){for(var i=t.length-1;i>=0;i--)if(t[i].target.uuid===e.target.uuid){r=i+1;break}}else r=t.findIndex((function(t){return t.target.uuid===e.target.uuid}));r=Math.max(0,r),t.splice(r,0,e),e.target._depth?(t.sort((function(e,t){return e.index-t.index})),t.sort((function(e,t){return t.renderOrder-e.renderOrder}))):(t.sort((function(e,t){return t.index-e.index})),t.sort((function(e,t){return e.renderOrder-t.renderOrder}))),t.sort((function(e,t){return e.target.index-t.target.index})),this.stacks.renderTargets=t}},{key:"addToRegularPlaneStack",value:function(e){for(var t=this.renderer.planes.filter((function(t){return"PingPongPlane"!==t.type&&!t.target&&t._transparent===e._transparent&&t.uuid!==e.uuid})),r=-1,i=t.length-1;i>=0;i--)if(t[i]._geometry.definition.id===e._geometry.definition.id){r=i+1;break}return r=Math.max(0,r),t.splice(r,0,e),t.sort((function(e,t){return e.index-t.index})),t}},{key:"addPlane",value:function(e){if("PingPongPlane"===e.type)this.stacks.pingPong.push(e);else if(e.target)this.addToRenderTargetsStack(e);else if(e._transparent){var t=this.addToRegularPlaneStack(e);t.sort((function(e,t){return t.relativeTranslation.z-e.relativeTranslation.z})),t.sort((function(e,t){return t.renderOrder-e.renderOrder})),this.stacks.transparent=t}else{var r=this.addToRegularPlaneStack(e);r.sort((function(e,t){return t.renderOrder-e.renderOrder})),this.stacks.opaque=r}}},{key:"removePlane",value:function(e){"PingPongPlane"===e.type?this.stacks.pingPong=this.stacks.pingPong.filter((function(t){return t.uuid!==e.uuid})):e.target?this.stacks.renderTargets=this.stacks.renderTargets.filter((function(t){return t.uuid!==e.uuid})):e._transparent?this.stacks.transparent=this.stacks.transparent.filter((function(t){return t.uuid!==e.uuid})):this.stacks.opaque=this.stacks.opaque.filter((function(t){return t.uuid!==e.uuid}))}},{key:"setPlaneRenderOrder",value:function(e){if("ShaderPass"===e.type)this.sortShaderPassStack(e._isScenePass?this.stacks.scenePasses:this.stacks.renderPasses);else if("PingPongPlane"===e.type)return;if(e.target)e.target._depth?(this.stacks.renderTargets.sort((function(e,t){return e.index-t.index})),this.stacks.renderTargets.sort((function(e,t){return t.renderOrder-e.renderOrder}))):(this.stacks.renderTargets.sort((function(e,t){return t.index-e.index})),this.stacks.renderTargets.sort((function(e,t){return e.renderOrder-t.renderOrder}))),this.stacks.renderTargets.sort((function(e,t){return e.target.index-t.target.index}));else{var t=e._transparent?this.stacks.transparent:this.stacks.opaque,r=this.stacks.scenePasses.find((function(e,t){return e._isScenePass&&!e._depth&&0===t}));!this.renderer.depth||r?(t.sort((function(e,t){return t.index-e.index})),e._transparent&&t.sort((function(e,t){return e.relativeTranslation.z-t.relativeTranslation.z})),t.sort((function(e,t){return e.renderOrder-t.renderOrder}))):(t.sort((function(e,t){return e.index-t.index})),e._transparent&&t.sort((function(e,t){return t.relativeTranslation.z-e.relativeTranslation.z})),t.sort((function(e,t){return t.renderOrder-e.renderOrder})))}}},{key:"addShaderPass",value:function(e){e._isScenePass?(this.stacks.scenePasses.push(e),this.sortShaderPassStack(this.stacks.scenePasses)):(this.stacks.renderPasses.push(e),this.sortShaderPassStack(this.stacks.renderPasses))}},{key:"removeShaderPass",value:function(e){this.resetShaderPassStacks()}},{key:"sortShaderPassStack",value:function(e){e.sort((function(e,t){return e.index-t.index})),e.sort((function(e,t){return e.renderOrder-t.renderOrder}))}},{key:"enableShaderPass",value:function(){this.stacks.scenePasses.length&&0===this.stacks.renderPasses.length&&this.renderer.planes.length&&(this.renderer.state.scenePassIndex=0,this.renderer.bindFrameBuffer(this.stacks.scenePasses[0].target))}},{key:"drawRenderPasses",value:function(){this.stacks.scenePasses.length&&this.stacks.renderPasses.length&&this.renderer.planes.length&&(this.renderer.state.scenePassIndex=0,this.renderer.bindFrameBuffer(this.stacks.scenePasses[0].target));for(var e=0;e<this.stacks.renderPasses.length;e++)this.stacks.renderPasses[e]._startDrawing(),this.renderer.clearDepth()}},{key:"drawScenePasses",value:function(){for(var e=0;e<this.stacks.scenePasses.length;e++)this.stacks.scenePasses[e]._startDrawing()}},{key:"drawPingPongStack",value:function(){for(var e=0;e<this.stacks.pingPong.length;e++){var t=this.stacks.pingPong[e];t&&t._startDrawing()}}},{key:"drawStack",value:function(e){for(var t=0;t<this.stacks[e].length;t++){var r=this.stacks[e][t];r&&r._startDrawing()}}},{key:"draw",value:function(){this.drawPingPongStack(),this.enableShaderPass(),this.drawStack("renderTargets"),this.drawRenderPasses(),this.renderer.setBlending(!1),this.drawStack("opaque"),this.stacks.transparent.length&&(this.renderer.setBlending(!0),this.drawStack("transparent")),this.drawScenePasses()}}])&&s(t.prototype,r),n&&s(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}()},"./js/vendor/curtainsjs/core/Texture.js":
/*!**********************************************!*\
  !*** ./js/vendor/curtainsjs/core/Texture.js ***!
  \**********************************************/
/*! exports provided: Texture */function(e,t,r){"use strict";r.r(t),r.d(t,"Texture",(function(){return f}));var i=r(/*! ../math/Mat4.js */"./js/vendor/curtainsjs/math/Mat4.js"),n=r(/*! ../math/Vec2.js */"./js/vendor/curtainsjs/math/Vec2.js"),s=r(/*! ../math/Vec3.js */"./js/vendor/curtainsjs/math/Vec3.js"),a=r(/*! ../utils/utils.js */"./js/vendor/curtainsjs/utils/utils.js");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(n=i.key,s=void 0,s=function(e,t){if("object"!==o(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!==o(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(n,"string"),"symbol"===o(s)?s:String(s)),i)}var n,s}var h=new n.Vec2,c=new s.Vec3,d=new i.Mat4,f=function(){function e(t){var r=this,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=s.isFBOTexture,l=void 0!==o&&o,h=s.fromTexture,c=void 0!==h&&h,d=s.loader,f=s.sampler,p=s.floatingPoint,g=void 0===p?"none":p,m=s.premultiplyAlpha,v=void 0!==m&&m,y=s.anisotropy,_=void 0===y?1:y,b=s.generateMipmap,x=void 0===b?null:b,w=s.wrapS,S=s.wrapT,P=s.minFilter,k=s.magFilter;if(u(this,e),this.type="Texture",(t=t&&t.renderer||t)&&"Renderer"===t.type){if(!t.gl)return void(t.production||Object(a.throwError)(this.type+": Unable to create a "+this.type+" because the Renderer WebGL context is not defined"))}else Object(a.throwError)(this.type+": Renderer not passed as first argument",t);if(this.renderer=t,this.gl=this.renderer.gl,this.uuid=Object(a.generateUUID)(),this._globalParameters={unpackAlignment:4,flipY:!l,premultiplyAlpha:!1,shouldPremultiplyAlpha:v,floatingPoint:g,type:this.gl.UNSIGNED_BYTE,internalFormat:this.gl.RGBA,format:this.gl.RGBA},this.parameters={anisotropy:_,generateMipmap:x,wrapS:w||this.gl.CLAMP_TO_EDGE,wrapT:S||this.gl.CLAMP_TO_EDGE,minFilter:P||this.gl.LINEAR,magFilter:k||this.gl.LINEAR,_shouldUpdate:!0},this._initState(),this.sourceType=l?"fbo":"empty",this._useCache=!0,this._samplerName=f,this._sampler={isActive:!1,isTextureBound:!1,texture:this.gl.createTexture()},this._textureMatrix={matrix:new i.Mat4,isActive:!1},this._size={width:1,height:1},this.scale=new n.Vec2(1),this.scale.onChange((function(){return r.resize()})),this.offset=new n.Vec2,this.offset.onChange((function(){return r.resize()})),this._loader=d,this._sourceLoaded=!1,this._uploaded=!1,this._willUpdate=!1,this.shouldUpdate=!1,this._forceUpdate=!1,this.userData={},this._canDraw=!1,c)return this._copyOnInit=!0,void(this._copiedFrom=c);this._copyOnInit=!1,this._initTexture()}var t,r,s;return t=e,(r=[{key:"_initState",value:function(){this._state={anisotropy:1,generateMipmap:!1,wrapS:null,wrapT:null,minFilter:null,magFilter:this.gl.LINEAR}}},{key:"_initTexture",value:function(){this.gl.bindTexture(this.gl.TEXTURE_2D,this._sampler.texture),"empty"===this.sourceType&&(this._globalParameters.flipY=!1,this._updateGlobalTexParameters(),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,1,1,0,this.gl.RGBA,this.gl.UNSIGNED_BYTE,new Uint8Array([0,0,0,255])),this._canDraw=!0)}},{key:"_restoreFromTexture",value:function(){this._copyOnInit||this._initTexture(),this._parent&&(this._setTextureUniforms(),this._setSize()),this.copy(this._copiedFrom),this._canDraw=!0}},{key:"_restoreContext",value:function(){var e=this;if(this._canDraw=!1,this._sampler.texture=this.gl.createTexture(),this._sampler.isActive=!1,this._sampler.isTextureBound=!1,this._textureMatrix.isActive=!1,this._initState(),this._state.generateMipmap=!1,this.parameters._shouldUpdate=!0,this._copiedFrom)var t=this.renderer.nextRender.add((function(){e._copiedFrom._canDraw&&(e._restoreFromTexture(),t.keep=!1)}),!0);else this._initTexture(),this._parent&&this._setParent(),this.source&&(this.setSource(this.source),"image"===this.sourceType?this.renderer.cache.addTexture(this):this.needUpdate()),this._canDraw=!0}},{key:"addParent",value:function(e){!e||"Plane"!==e.type&&"PingPongPlane"!==e.type&&"ShaderPass"!==e.type&&"RenderTarget"!==e.type?this.renderer.production||Object(a.throwWarning)(this.type+": cannot add texture as a child of ",e," because it is not a valid parent"):(this._parent=e,this.index=this._parent.textures.length,this._parent.textures.push(this),this._setParent())}},{key:"_setParent",value:function(){var e=this;if(this._sampler.name=this._samplerName||"uSampler"+this.index,this._textureMatrix.name=this._samplerName?this._samplerName+"Matrix":"uTextureMatrix"+this.index,this._parent._program){if(!this._parent._program.compiled)return void(this.renderer.production||Object(a.throwWarning)(this.type+": Unable to create the texture because the program is not valid"));if(this._setTextureUniforms(),this._copyOnInit){var t=this.renderer.nextRender.add((function(){e._copiedFrom._canDraw&&e._copiedFrom._uploaded&&(e.copy(e._copiedFrom),t.keep=!1)}),!0);return}this.source?this._parent.loader&&this._parent.loader._addSourceToParent(this.source,this.sourceType):this._size={width:this._parent._boundingRect.document.width,height:this._parent._boundingRect.document.height},this._setSize()}else"RenderTarget"===this._parent.type&&(this._size={width:this._parent._size&&this._parent._size.width||this.renderer._boundingRect.width,height:this._parent._size&&this._parent._size.height||this.renderer._boundingRect.height},this._upload(),this._updateTexParameters(),this._canDraw=!0)}},{key:"hasParent",value:function(){return!!this._parent}},{key:"_setTextureUniforms",value:function(){for(var e=this,t=this._parent._program.activeUniforms,r=0;r<t.textures.length;r++)t.textures[r]===this._sampler.name&&(this._sampler.isActive=!0,this.renderer.useProgram(this._parent._program),this._sampler.location=this.gl.getUniformLocation(this._parent._program.program,this._sampler.name),t.textureMatrices.find((function(t){return t===e._textureMatrix.name}))&&(this._textureMatrix.isActive=!0,this._textureMatrix.location=this.gl.getUniformLocation(this._parent._program.program,this._textureMatrix.name)),this.gl.uniform1i(this._sampler.location,this.index))}},{key:"copy",value:function(e){e&&"Texture"===e.type?(this._globalParameters=Object.assign({},e._globalParameters),this._state=Object.assign({},e._state),this.parameters.generateMipmap=e.parameters.generateMipmap,this._state.generateMipmap=null,this._size=e._size,!this._sourceLoaded&&e._sourceLoaded&&this._onSourceLoadedCallback&&this._onSourceLoadedCallback(),this._sourceLoaded=e._sourceLoaded,!this._uploaded&&e._uploaded&&this._onSourceUploadedCallback&&this._onSourceUploadedCallback(),this._uploaded=e._uploaded,this.sourceType=e.sourceType,this.source=e.source,this._videoFrameCallbackID=e._videoFrameCallbackID,this._sampler.texture=e._sampler.texture,this._copiedFrom=e,!this._parent||!this._parent._program||this._canDraw&&this._textureMatrix.matrix||(this._setSize(),this._canDraw=!0),this._updateTexParameters(),this.renderer.needRender()):this.renderer.production||Object(a.throwWarning)(this.type+": Unable to set the texture from texture:",e)}},{key:"setSource",value:function(e){var t=this;this._sourceLoaded||this.renderer.nextRender.add((function(){return t._onSourceLoadedCallback&&t._onSourceLoadedCallback()}));var r="IMG"===e.tagName.toUpperCase()?"image":e.tagName.toLowerCase();if("video"!==r&&"canvas"!==r||(this._useCache=!1),this._useCache){var i=this.renderer.cache.getTextureFromSource(e);if(i&&i.uuid!==this.uuid)return this._uploaded||(this.renderer.nextRender.add((function(){return t._onSourceUploadedCallback&&t._onSourceUploadedCallback()})),this._uploaded=!0),this.copy(i),void this.resize()}if("empty"===this.sourceType||this.sourceType!==r)if("video"===r)this._willUpdate=!1,this.shouldUpdate=!0;else if("canvas"===r)this._willUpdate=!0,this.shouldUpdate=!0;else{if("image"!==r)return void(this.renderer.production||Object(a.throwWarning)(this.type+": this HTML tag could not be converted into a texture:",e.tagName));this._willUpdate=!1,this.shouldUpdate=!1}this.source=e,this.sourceType=r,this._size={width:this.source.naturalWidth||this.source.width||this.source.videoWidth,height:this.source.naturalHeight||this.source.height||this.source.videoHeight},this._sourceLoaded=!0,this.gl.bindTexture(this.gl.TEXTURE_2D,this._sampler.texture),this.resize(),this._globalParameters.flipY=!0,this._globalParameters.premultiplyAlpha=this._globalParameters.shouldPremultiplyAlpha,"image"===this.sourceType&&(this.parameters.generateMipmap=this.parameters.generateMipmap||null===this.parameters.generateMipmap,this.parameters._shouldUpdate=this.parameters.generateMipmap,this._state.generateMipmap=!1,this._upload()),this.renderer.needRender()}},{key:"_updateGlobalTexParameters",value:function(){this.renderer.state.unpackAlignment!==this._globalParameters.unpackAlignment&&(this.gl.pixelStorei(this.gl.UNPACK_ALIGNMENT,this._globalParameters.unpackAlignment),this.renderer.state.unpackAlignment=this._globalParameters.unpackAlignment),this.renderer.state.flipY!==this._globalParameters.flipY&&(this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,this._globalParameters.flipY),this.renderer.state.flipY=this._globalParameters.flipY),this.renderer.state.premultiplyAlpha!==this._globalParameters.premultiplyAlpha&&(this.gl.pixelStorei(this.gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this._globalParameters.premultiplyAlpha),this.renderer.state.premultiplyAlpha=this._globalParameters.premultiplyAlpha),"half-float"===this._globalParameters.floatingPoint?this.renderer._isWebGL2&&this.renderer.extensions.EXT_color_buffer_float?(this._globalParameters.internalFormat=this.gl.RGBA16F,this._globalParameters.type=this.gl.HALF_FLOAT):this.renderer.extensions.OES_texture_half_float?this._globalParameters.type=this.renderer.extensions.OES_texture_half_float.HALF_FLOAT_OES:this.renderer.production||Object(a.throwWarning)(this.type+": could not use half-float textures because the extension is not available"):"float"===this._globalParameters.floatingPoint&&(this.renderer._isWebGL2&&this.renderer.extensions.EXT_color_buffer_float?(this._globalParameters.internalFormat=this.gl.RGBA16F,this._globalParameters.type=this.gl.FLOAT):this.renderer.extensions.OES_texture_float?this._globalParameters.type=this.renderer.extensions.OES_texture_half_float.FLOAT:this.renderer.production||Object(a.throwWarning)(this.type+": could not use float textures because the extension is not available"))}},{key:"_updateTexParameters",value:function(){this.index&&this.renderer.state.activeTexture!==this.index&&this._bindTexture(),this.parameters.wrapS!==this._state.wrapS&&(this.renderer._isWebGL2||Object(a.isPowerOf2)(this._size.width)&&Object(a.isPowerOf2)(this._size.height)||(this.parameters.wrapS=this.gl.CLAMP_TO_EDGE),this.parameters.wrapS!==this.gl.REPEAT&&this.parameters.wrapS!==this.gl.CLAMP_TO_EDGE&&this.parameters.wrapS!==this.gl.MIRRORED_REPEAT&&(this.renderer.production||Object(a.throwWarning)(this.type+": Wrong wrapS value",this.parameters.wrapS,"for this texture:",this,"\ngl.CLAMP_TO_EDGE wrapping will be used instead"),this.parameters.wrapS=this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.parameters.wrapS),this._state.wrapS=this.parameters.wrapS),this.parameters.wrapT!==this._state.wrapT&&(this.renderer._isWebGL2||Object(a.isPowerOf2)(this._size.width)&&Object(a.isPowerOf2)(this._size.height)||(this.parameters.wrapT=this.gl.CLAMP_TO_EDGE),this.parameters.wrapT!==this.gl.REPEAT&&this.parameters.wrapT!==this.gl.CLAMP_TO_EDGE&&this.parameters.wrapT!==this.gl.MIRRORED_REPEAT&&(this.renderer.production||Object(a.throwWarning)(this.type+": Wrong wrapT value",this.parameters.wrapT,"for this texture:",this,"\ngl.CLAMP_TO_EDGE wrapping will be used instead"),this.parameters.wrapT=this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.parameters.wrapT),this._state.wrapT=this.parameters.wrapT),this.parameters.generateMipmap&&!this._state.generateMipmap&&this.source&&(this.renderer._isWebGL2||Object(a.isPowerOf2)(this._size.width)&&Object(a.isPowerOf2)(this._size.height)?this.gl.generateMipmap(this.gl.TEXTURE_2D):this.parameters.generateMipmap=!1,this._state.generateMipmap=this.parameters.generateMipmap),this.parameters.minFilter!==this._state.minFilter&&(this.renderer._isWebGL2||Object(a.isPowerOf2)(this._size.width)&&Object(a.isPowerOf2)(this._size.height)||(this.parameters.minFilter=this.gl.LINEAR),this.parameters.generateMipmap||null===this.parameters.generateMipmap||(this.parameters.minFilter=this.gl.LINEAR),this.parameters.minFilter!==this.gl.LINEAR&&this.parameters.minFilter!==this.gl.NEAREST&&this.parameters.minFilter!==this.gl.NEAREST_MIPMAP_NEAREST&&this.parameters.minFilter!==this.gl.LINEAR_MIPMAP_NEAREST&&this.parameters.minFilter!==this.gl.NEAREST_MIPMAP_LINEAR&&this.parameters.minFilter!==this.gl.LINEAR_MIPMAP_LINEAR&&(this.renderer.production||Object(a.throwWarning)(this.type+": Wrong minFilter value",this.parameters.minFilter,"for this texture:",this,"\ngl.LINEAR filtering will be used instead"),this.parameters.minFilter=this.gl.LINEAR),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.parameters.minFilter),this._state.minFilter=this.parameters.minFilter),this.parameters.magFilter!==this._state.magFilter&&(this.renderer._isWebGL2||Object(a.isPowerOf2)(this._size.width)&&Object(a.isPowerOf2)(this._size.height)||(this.parameters.magFilter=this.gl.LINEAR),this.parameters.magFilter!==this.gl.LINEAR&&this.parameters.magFilter!==this.gl.NEAREST&&(this.renderer.production||Object(a.throwWarning)(this.type+": Wrong magFilter value",this.parameters.magFilter,"for this texture:",this,"\ngl.LINEAR filtering will be used instead"),this.parameters.magFilter=this.gl.LINEAR),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.parameters.magFilter),this._state.magFilter=this.parameters.magFilter);var e=this.renderer.extensions.EXT_texture_filter_anisotropic;if(e&&this.parameters.anisotropy!==this._state.anisotropy){var t=this.gl.getParameter(e.MAX_TEXTURE_MAX_ANISOTROPY_EXT);this.parameters.anisotropy=Math.max(1,Math.min(this.parameters.anisotropy,t)),this.gl.texParameterf(this.gl.TEXTURE_2D,e.TEXTURE_MAX_ANISOTROPY_EXT,this.parameters.anisotropy),this._state.anisotropy=this.parameters.anisotropy}}},{key:"setWrapS",value:function(e){this.parameters.wrapS!==e&&(this.parameters.wrapS=e,this.parameters._shouldUpdate=!0)}},{key:"setWrapT",value:function(e){this.parameters.wrapT!==e&&(this.parameters.wrapT=e,this.parameters._shouldUpdate=!0)}},{key:"setMinFilter",value:function(e){this.parameters.minFilter!==e&&(this.parameters.minFilter=e,this.parameters._shouldUpdate=!0)}},{key:"setMagFilter",value:function(e){this.parameters.magFilter!==e&&(this.parameters.magFilter=e,this.parameters._shouldUpdate=!0)}},{key:"setAnisotropy",value:function(e){e=isNaN(e)?this.parameters.anisotropy:e,this.parameters.anisotropy!==e&&(this.parameters.anisotropy=e,this.parameters._shouldUpdate=!0)}},{key:"needUpdate",value:function(){this._forceUpdate=!0}},{key:"_videoFrameCallback",value:function(){var e=this;this._willUpdate=!0,this.source.requestVideoFrameCallback((function(){return e._videoFrameCallback()}))}},{key:"_upload",value:function(){var e=this;this._updateGlobalTexParameters(),this.source?this.gl.texImage2D(this.gl.TEXTURE_2D,0,this._globalParameters.internalFormat,this._globalParameters.format,this._globalParameters.type,this.source):"fbo"===this.sourceType&&this.gl.texImage2D(this.gl.TEXTURE_2D,0,this._globalParameters.internalFormat,this._size.width,this._size.height,0,this._globalParameters.format,this._globalParameters.type,this.source||null),this._uploaded||(this.renderer.nextRender.add((function(){return e._onSourceUploadedCallback&&e._onSourceUploadedCallback()})),this._uploaded=!0)}},{key:"_getSizes",value:function(){if("fbo"===this.sourceType)return{parentWidth:this._parent._boundingRect.document.width,parentHeight:this._parent._boundingRect.document.height,sourceWidth:this._parent._boundingRect.document.width,sourceHeight:this._parent._boundingRect.document.height,xOffset:0,yOffset:0};var e=this._parent.scale?h.set(this._parent.scale.x,this._parent.scale.y):h.set(1,1),t=this._parent._boundingRect.document.width*e.x,r=this._parent._boundingRect.document.height*e.y,i=this._size.width,n=this._size.height,s=i/n,a=t/r,o=0,u=0;return a>s?u=Math.min(0,r-t*(1/s)):a<s&&(o=Math.min(0,t-r*s)),{parentWidth:t,parentHeight:r,sourceWidth:i,sourceHeight:n,xOffset:o,yOffset:u}}},{key:"setScale",value:function(e){e.type&&"Vec2"===e.type?(e.sanitizeNaNValuesWith(this.scale).max(h.set(.001,.001)),e.equals(this.scale)||(this.scale.copy(e),this.resize())):this.renderer.production||Object(a.throwWarning)(this.type+": Cannot set scale because the parameter passed is not of Vec2 type:",e)}},{key:"setOffset",value:function(e){e.type&&"Vec2"===e.type?(e.sanitizeNaNValuesWith(this.offset),e.equals(this.offset)||(this.offset.copy(e),this.resize())):this.renderer.production||Object(a.throwWarning)(this.type+": Cannot set offset because the parameter passed is not of Vec2 type:",scale)}},{key:"_setSize",value:function(){if(this._parent&&this._parent._program){var e=this._getSizes();this._updateTextureMatrix(e)}}},{key:"resize",value:function(){"fbo"===this.sourceType?(this._size={width:this._parent._size&&this._parent._size.width||this._parent._boundingRect.document.width,height:this._parent._size&&this._parent._size.height||this._parent._boundingRect.document.height},this._copiedFrom||(this.gl.bindTexture(this.gl.TEXTURE_2D,this._sampler.texture),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this._globalParameters.internalFormat,this._size.width,this._size.height,0,this._globalParameters.format,this._globalParameters.type,null))):this.source&&(this._size={width:this.source.naturalWidth||this.source.width||this.source.videoWidth,height:this.source.naturalHeight||this.source.height||this.source.videoHeight}),this._setSize()}},{key:"_updateTextureMatrix",value:function(e){var t=c.set(e.parentWidth/(e.parentWidth-e.xOffset),e.parentHeight/(e.parentHeight-e.yOffset),1);t.x/=this.scale.x,t.y/=this.scale.y,this._textureMatrix.matrix=d.setFromArray([t.x,0,0,0,0,t.y,0,0,0,0,1,0,(1-t.x)/2+this.offset.x,(1-t.y)/2+this.offset.y,0,1]),this._updateMatrixUniform()}},{key:"_updateMatrixUniform",value:function(){this._textureMatrix.isActive&&(this.renderer.useProgram(this._parent._program),this.gl.uniformMatrix4fv(this._textureMatrix.location,!1,this._textureMatrix.matrix.elements))}},{key:"_onSourceLoaded",value:function(e){this.setSource(e),"image"===this.sourceType&&this.renderer.cache.addTexture(this)}},{key:"_bindTexture",value:function(){this._canDraw&&(this.renderer.state.activeTexture!==this.index&&(this.gl.activeTexture(this.gl.TEXTURE0+this.index),this.renderer.state.activeTexture=this.index),this.gl.bindTexture(this.gl.TEXTURE_2D,this._sampler.texture),this._sampler.isTextureBound||(this._sampler.isTextureBound=!!this.gl.getParameter(this.gl.TEXTURE_BINDING_2D),this._sampler.isTextureBound&&this.renderer.needRender()))}},{key:"_draw",value:function(){this._sampler.isActive&&(this._bindTexture(),"video"===this.sourceType&&this.source&&!this._videoFrameCallbackID&&this.source.readyState>=this.source.HAVE_CURRENT_DATA&&!this.source.paused&&(this._willUpdate=!0),(this._forceUpdate||this._willUpdate&&this.shouldUpdate)&&(this._state.generateMipmap=!1,this._upload()),"video"===this.sourceType&&(this._willUpdate=!1),this._forceUpdate=!1),this.parameters._shouldUpdate&&(this._updateTexParameters(),this.parameters._shouldUpdate=!1)}},{key:"onSourceLoaded",value:function(e){return e&&(this._onSourceLoadedCallback=e),this}},{key:"onSourceUploaded",value:function(e){return e&&(this._onSourceUploadedCallback=e),this}},{key:"_dispose",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];"video"===this.sourceType||"image"===this.sourceType&&!this.renderer.state.isActive?(this._loader&&this._loader._removeSource(this),this.source=null):"canvas"===this.sourceType&&(this.source.width=this.source.width,this.source=null),this._parent=null;var t=this.gl&&!this._copiedFrom&&(e||"image"!==this.sourceType||!this.renderer.state.isActive);t&&(this._canDraw=!1,this.renderer.cache.removeTexture(this),this.gl.activeTexture(this.gl.TEXTURE0+this.index),this.gl.bindTexture(this.gl.TEXTURE_2D,null),this.gl.deleteTexture(this._sampler.texture))}}])&&l(t.prototype,r),s&&l(t,s),Object.defineProperty(t,"prototype",{writable:!1}),e}()},"./js/vendor/curtainsjs/core/Uniforms.js":
/*!***********************************************!*\
  !*** ./js/vendor/curtainsjs/core/Uniforms.js ***!
  \***********************************************/
/*! exports provided: Uniforms */function(e,t,r){"use strict";r.r(t),r.d(t,"Uniforms",(function(){return a}));var i=r(/*! ../utils/utils.js */"./js/vendor/curtainsjs/utils/utils.js");function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(s=i.key,a=void 0,a=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(s,"string"),"symbol"===n(a)?a:String(a)),i)}var s,a}var a=function(){function e(t,r,n){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.type="Uniforms",t&&"Renderer"===t.type){if(!t.gl)return void Object(i.throwError)(this.type+": Renderer WebGL context is undefined",t)}else Object(i.throwError)(this.type+": Renderer not passed as first argument",t);if(this.renderer=t,this.gl=t.gl,this.program=r,this.uniforms={},n)for(var s in n){var a=n[s];this.uniforms[s]={name:a.name,type:a.type,value:a.value.clone&&"function"==typeof a.value.clone?a.value.clone():a.value,update:null}}}var t,r,n;return t=e,(r=[{key:"handleUniformSetting",value:function(e){switch(e.type){case"1i":e.update=this.setUniform1i.bind(this);break;case"1iv":e.update=this.setUniform1iv.bind(this);break;case"1f":e.update=this.setUniform1f.bind(this);break;case"1fv":e.update=this.setUniform1fv.bind(this);break;case"2i":e.update=this.setUniform2i.bind(this);break;case"2iv":e.update=this.setUniform2iv.bind(this);break;case"2f":e.update=this.setUniform2f.bind(this);break;case"2fv":e.update=this.setUniform2fv.bind(this);break;case"3i":e.update=this.setUniform3i.bind(this);break;case"3iv":e.update=this.setUniform3iv.bind(this);break;case"3f":e.update=this.setUniform3f.bind(this);break;case"3fv":e.update=this.setUniform3fv.bind(this);break;case"4i":e.update=this.setUniform4i.bind(this);break;case"4iv":e.update=this.setUniform4iv.bind(this);break;case"4f":e.update=this.setUniform4f.bind(this);break;case"4fv":e.update=this.setUniform4fv.bind(this);break;case"mat2":e.update=this.setUniformMatrix2fv.bind(this);break;case"mat3":e.update=this.setUniformMatrix3fv.bind(this);break;case"mat4":e.update=this.setUniformMatrix4fv.bind(this);break;default:this.renderer.production||Object(i.throwWarning)(this.type+": This uniform type is not handled : ",e.type)}}},{key:"setInternalFormat",value:function(e){"Vec2"===e.value.type?(e._internalFormat="Vec2",e.lastValue=e.value.clone()):"Vec3"===e.value.type?(e._internalFormat="Vec3",e.lastValue=e.value.clone()):"Mat4"===e.value.type?(e._internalFormat="Mat4",e.lastValue=e.value.clone()):"Quat"===e.value.type?(e._internalFormat="Quat",e.lastValue=e.value.clone()):Array.isArray(e.value)?(e._internalFormat="array",e.lastValue=Array.from(e.value)):e.value.constructor===Float32Array?(e._internalFormat="mat",e.lastValue=e.value):(e._internalFormat="float",e.lastValue=e.value)}},{key:"setUniforms",value:function(){if(this.uniforms)for(var e in this.uniforms){var t=this.uniforms[e];t.location=this.gl.getUniformLocation(this.program,t.name),t._internalFormat||this.setInternalFormat(t),t.type||("Vec2"===t._internalFormat?t.type="2f":"Vec3"===t._internalFormat?t.type="3f":"Mat4"===t._internalFormat?t.type="mat4":"array"===t._internalFormat?4===t.value.length?(t.type="4f",this.renderer.production||Object(i.throwWarning)(this.type+": No uniform type declared for "+t.name+", applied a 4f (array of 4 floats) uniform type")):3===t.value.length?(t.type="3f",this.renderer.production||Object(i.throwWarning)(this.type+": No uniform type declared for "+t.name+", applied a 3f (array of 3 floats) uniform type")):2===t.value.length&&(t.type="2f",this.renderer.production||Object(i.throwWarning)(this.type+": No uniform type declared for "+t.name+", applied a 2f (array of 2 floats) uniform type")):"mat"===t._internalFormat?16===t.value.length?(t.type="mat4",this.renderer.production||Object(i.throwWarning)(this.type+": No uniform type declared for "+t.name+", applied a mat4 (4x4 matrix array) uniform type")):9===t.value.length?(t.type="mat3",this.renderer.production||Object(i.throwWarning)(this.type+": No uniform type declared for "+t.name+", applied a mat3 (3x3 matrix array) uniform type")):4===t.value.length&&(t.type="mat2",this.renderer.production||Object(i.throwWarning)(this.type+": No uniform type declared for "+t.name+", applied a mat2 (2x2 matrix array) uniform type")):(t.type="1f",this.renderer.production||Object(i.throwWarning)(this.type+": No uniform type declared for "+t.name+", applied a 1f (float) uniform type"))),this.handleUniformSetting(t),t.update&&t.update(t)}}},{key:"updateUniforms",value:function(){if(this.uniforms)for(var e in this.uniforms){var t=this.uniforms[e],r=!1;"Vec2"===t._internalFormat||"Vec3"===t._internalFormat||"Quat"===t._internalFormat?t.value.equals(t.lastValue)||(r=!0,t.lastValue.copy(t.value)):t.value.length?JSON.stringify(t.value)!==JSON.stringify(t.lastValue)&&(r=!0,t.lastValue=Array.from(t.value)):t.value!==t.lastValue&&(r=!0,t.lastValue=t.value),r&&t.update&&t.update(t)}}},{key:"setUniform1i",value:function(e){this.gl.uniform1i(e.location,e.value)}},{key:"setUniform1iv",value:function(e){this.gl.uniform1iv(e.location,e.value)}},{key:"setUniform1f",value:function(e){this.gl.uniform1f(e.location,e.value)}},{key:"setUniform1fv",value:function(e){this.gl.uniform1fv(e.location,e.value)}},{key:"setUniform2i",value:function(e){"Vec2"===e._internalFormat?this.gl.uniform2i(e.location,e.value.x,e.value.y):this.gl.uniform2i(e.location,e.value[0],e.value[1])}},{key:"setUniform2iv",value:function(e){"Vec2"===e._internalFormat?this.gl.uniform2iv(e.location,[e.value.x,e.value.y]):this.gl.uniform2iv(e.location,e.value)}},{key:"setUniform2f",value:function(e){"Vec2"===e._internalFormat?this.gl.uniform2f(e.location,e.value.x,e.value.y):this.gl.uniform2f(e.location,e.value[0],e.value[1])}},{key:"setUniform2fv",value:function(e){"Vec2"===e._internalFormat?this.gl.uniform2fv(e.location,[e.value.x,e.value.y]):this.gl.uniform2fv(e.location,e.value)}},{key:"setUniform3i",value:function(e){"Vec3"===e._internalFormat?this.gl.uniform3i(e.location,e.value.x,e.value.y,e.value.z):this.gl.uniform3i(e.location,e.value[0],e.value[1],e.value[2])}},{key:"setUniform3iv",value:function(e){"Vec3"===e._internalFormat?this.gl.uniform3iv(e.location,[e.value.x,e.value.y,e.value.z]):this.gl.uniform3iv(e.location,e.value)}},{key:"setUniform3f",value:function(e){"Vec3"===e._internalFormat?this.gl.uniform3f(e.location,e.value.x,e.value.y,e.value.z):this.gl.uniform3f(e.location,e.value[0],e.value[1],e.value[2])}},{key:"setUniform3fv",value:function(e){"Vec3"===e._internalFormat?this.gl.uniform3fv(e.location,[e.value.x,e.value.y,e.value.z]):this.gl.uniform3fv(e.location,e.value)}},{key:"setUniform4i",value:function(e){"Quat"===e._internalFormat?this.gl.uniform4i(e.location,e.value.elements[0],e.value.elements[1],e.value.elements[2],e.value[3]):this.gl.uniform4i(e.location,e.value[0],e.value[1],e.value[2],e.value[3])}},{key:"setUniform4iv",value:function(e){"Quat"===e._internalFormat?this.gl.uniform4iv(e.location,[e.value.elements[0],e.value.elements[1],e.value.elements[2],e.value[3]]):this.gl.uniform4iv(e.location,e.value)}},{key:"setUniform4f",value:function(e){"Quat"===e._internalFormat?this.gl.uniform4f(e.location,e.value.elements[0],e.value.elements[1],e.value.elements[2],e.value[3]):this.gl.uniform4f(e.location,e.value[0],e.value[1],e.value[2],e.value[3])}},{key:"setUniform4fv",value:function(e){"Quat"===e._internalFormat?this.gl.uniform4fv(e.location,[e.value.elements[0],e.value.elements[1],e.value.elements[2],e.value[3]]):this.gl.uniform4fv(e.location,e.value)}},{key:"setUniformMatrix2fv",value:function(e){this.gl.uniformMatrix2fv(e.location,!1,e.value)}},{key:"setUniformMatrix3fv",value:function(e){this.gl.uniformMatrix3fv(e.location,!1,e.value)}},{key:"setUniformMatrix4fv",value:function(e){"Mat4"===e._internalFormat?this.gl.uniformMatrix4fv(e.location,!1,e.value.elements):this.gl.uniformMatrix4fv(e.location,!1,e.value)}}])&&s(t.prototype,r),n&&s(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}()},"./js/vendor/curtainsjs/extras/FXAAPass.js":
/*!*************************************************!*\
  !*** ./js/vendor/curtainsjs/extras/FXAAPass.js ***!
  \*************************************************/
/*! exports provided: FXAAPass */function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(s=n.key,a=void 0,a=function(e,t){if("object"!==i(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(s,"string"),"symbol"===i(a)?a:String(a)),n)}var s,a}function a(e,t){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function o(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,i=l(e);if(t){var n=l(this).constructor;r=Reflect.construct(i,arguments,n)}else r=i.apply(this,arguments);return u(this,r)}}function u(e,t){if(t&&("object"===i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}r.r(t),r.d(t,"FXAAPass",(function(){return h}));var h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&a(e,t)}(h,e);var t,r,i,l=o(h);function h(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=r.renderOrder,s=r.depthTest,a=r.texturesOptions,o=r.crossOrigin,c=r.depth,d=r.clear,f=r.renderTarget;n(this,h);var p="\n            precision mediump float;\n            \n            varying vec3 vVertexPosition;\n            varying vec2 vTextureCoord;\n        \n            uniform sampler2D uRenderTexture;\n            \n            uniform vec2 uResolution;\n            \n            #define FXAA_REDUCE_MIN   (1.0/128.0)\n            #define FXAA_REDUCE_MUL   (1.0/8.0)\n            #define FXAA_SPAN_MAX     8.0\n            \n            void main() {\n                vec2 res = 1.0 / uResolution;\n            \n                vec3 rgbNW = texture2D(uRenderTexture, (vTextureCoord.xy + vec2(-1.0, -1.0) * res)).xyz;\n                vec3 rgbNE = texture2D(uRenderTexture, (vTextureCoord.xy + vec2(1.0, -1.0) * res)).xyz;\n                vec3 rgbSW = texture2D(uRenderTexture, (vTextureCoord.xy + vec2(-1.0, 1.0) * res)).xyz;\n                vec3 rgbSE = texture2D(uRenderTexture, (vTextureCoord.xy + vec2(1.0, 1.0) * res)).xyz;\n                vec4 rgbaM = texture2D(uRenderTexture, vTextureCoord.xy * res);\n                vec3 rgbM = rgbaM.xyz;\n                vec3 luma = vec3(0.299, 0.587, 0.114);\n            \n                float lumaNW = dot(rgbNW, luma);\n                float lumaNE = dot(rgbNE, luma);\n                float lumaSW = dot(rgbSW, luma);\n                float lumaSE = dot(rgbSE, luma);\n                float lumaM  = dot(rgbM,  luma);\n                float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\n                float lumaMax = max(lumaM, max(max(lumaNW, lumaNE) , max(lumaSW, lumaSE)));\n            \n                vec2 dir;\n                dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n                dir.y = ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n            \n                float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) * (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);\n            \n                float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);\n                dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),\n                      max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n                            dir * rcpDirMin)) * res;\n                vec4 rgbA = (1.0/2.0) * (\n                texture2D(uRenderTexture, vTextureCoord.xy + dir * (1.0/3.0 - 0.5)) +\n                texture2D(uRenderTexture, vTextureCoord.xy + dir * (2.0/3.0 - 0.5)));\n                vec4 rgbB = rgbA * (1.0/2.0) + (1.0/4.0) * (\n                texture2D(uRenderTexture, vTextureCoord.xy + dir * (0.0/3.0 - 0.5)) +\n                texture2D(uRenderTexture, vTextureCoord.xy + dir * (3.0/3.0 - 0.5)));\n                float lumaB = dot(rgbB, vec4(luma, 0.0));\n            \n                if ((lumaB < lumaMin) || (lumaB > lumaMax)) {\n                    gl_FragColor = rgbA;\n                } else {\n                    gl_FragColor = rgbB;\n                }\n            }\n        ",g={resolution:{name:"uResolution",type:"2f",value:[0,0]}};return(t=l.call(this,e,{fragmentShader:p,uniforms:g,renderOrder:i,depthTest:s,texturesOptions:a,crossOrigin:o,depth:c,clear:d,renderTarget:f})).gl?(t.uniforms.resolution.value=[t.renderer._boundingRect.width,t.renderer._boundingRect.height],t._onAfterResizeCallback=function(){t.uniforms.resolution.value=[t.renderer._boundingRect.width,t.renderer._boundingRect.height],t._onFXAAPassAfterResizeCallback&&t._onFXAAPassAfterResizeCallback()},t):u(t)}return t=h,(r=[{key:"onAfterResize",value:function(e){return e&&(this._onFXAAPassAfterResizeCallback=e),this}}])&&s(t.prototype,r),i&&s(t,i),Object.defineProperty(t,"prototype",{writable:!1}),h}(r(/*! ../framebuffers/ShaderPass.js */"./js/vendor/curtainsjs/framebuffers/ShaderPass.js").ShaderPass)},"./js/vendor/curtainsjs/extras/PingPongPlane.js":
/*!******************************************************!*\
  !*** ./js/vendor/curtainsjs/extras/PingPongPlane.js ***!
  \******************************************************/
/*! exports provided: PingPongPlane */function(e,t,r){"use strict";r.r(t),r.d(t,"PingPongPlane",(function(){return g}));var i=r(/*! ../core/Plane.js */"./js/vendor/curtainsjs/core/Plane.js"),n=r(/*! ../framebuffers/RenderTarget.js */"./js/vendor/curtainsjs/framebuffers/RenderTarget.js");function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(n=i.key,a=void 0,a=function(e,t){if("object"!==s(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!==s(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(n,"string"),"symbol"===s(a)?a:String(a)),i)}var n,a}function u(){return(u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var i=l(e,t);if(i){var n=Object.getOwnPropertyDescriptor(i,t);return n.get?n.get.call(arguments.length<3?e:r):n.value}}).apply(this,arguments)}function l(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=p(e)););return e}function h(e,t){return(h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,i=p(e);if(t){var n=p(this).constructor;r=Reflect.construct(i,arguments,n)}else r=i.apply(this,arguments);return d(this,r)}}function d(e,t){if(t&&("object"===s(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return f(e)}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&h(e,t)}(l,e);var t,r,i,s=c(l);function l(e,t){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=i.sampler,u=void 0===o?"uPingPongTexture":o,h=i.widthSegments,c=i.heightSegments,p=i.renderOrder,g=i.depthTest,m=i.cullFace,v=i.uniforms,y=i.vertexShaderID,_=i.fragmentShaderID,b=i.vertexShader,x=i.fragmentShader,w=i.texturesOptions,S=i.crossOrigin,P=i.alwaysDraw,k=i.visible,j=i.transparent,R=i.drawCheckMargins,T=i.autoloadSources,E=i.watchScroll,O=i.fov;if(a(this,l),g=!1,T=!1,!(r=s.call(this,e,t,{widthSegments:h,heightSegments:c,renderOrder:p,depthTest:g,cullFace:m,uniforms:v,vertexShaderID:y,fragmentShaderID:_,vertexShader:b,fragmentShader:x,texturesOptions:w,crossOrigin:S,alwaysDraw:P,visible:k,transparent:j,drawCheckMargins:R,autoloadSources:T,watchScroll:E,fov:O})).gl)return d(r);r.renderer.scene.removePlane(f(r)),r.type="PingPongPlane",r.renderer.scene.addPlane(f(r)),r.readPass=new n.RenderTarget(e,{depth:!1,clear:!1,texturesOptions:w}),r.writePass=new n.RenderTarget(e,{depth:!1,clear:!1,texturesOptions:w});r.createTexture({sampler:u});var C=0;return r.readPass.getTexture().onSourceUploaded((function(){C++,r._checkIfReady(C)})),r.writePass.getTexture().onSourceUploaded((function(){C++,r._checkIfReady(C)})),r.setRenderTarget(r.readPass),r._onRenderCallback=function(){r.readPass&&r.writePass&&r.textures[0]&&r.textures[0]._uploaded&&r.setRenderTarget(r.writePass),r._onPingPongRenderCallback&&r._onPingPongRenderCallback()},r._onAfterRenderCallback=function(){r.readPass&&r.writePass&&r.textures[0]&&r.textures[0]._uploaded&&r._swapPasses(),r._onPingPongAfterRenderCallback&&r._onPingPongAfterRenderCallback()},r}return t=l,(r=[{key:"_checkIfReady",value:function(e){var t=this;2===e&&this.renderer.nextRender.add((function(){t.textures[0].copy(t.target.getTexture())}))}},{key:"_swapPasses",value:function(){var e=this.readPass;this.readPass=this.writePass,this.writePass=e,this.textures[0].copy(this.readPass.getTexture())}},{key:"getTexture",value:function(){return this.textures[0]}},{key:"onRender",value:function(e){return e&&(this._onPingPongRenderCallback=e),this}},{key:"onAfterRender",value:function(e){return e&&(this._onPingPongAfterRenderCallback=e),this}},{key:"remove",value:function(){this.target=null,this.renderer.bindFrameBuffer(null),this.writePass&&(this.writePass.remove(),this.writePass=null),this.readPass&&(this.readPass.remove(),this.readPass=null),u(p(l.prototype),"remove",this).call(this)}}])&&o(t.prototype,r),i&&o(t,i),Object.defineProperty(t,"prototype",{writable:!1}),l}(i.Plane)},"./js/vendor/curtainsjs/framebuffers/RenderTarget.js":
/*!***********************************************************!*\
  !*** ./js/vendor/curtainsjs/framebuffers/RenderTarget.js ***!
  \***********************************************************/
/*! exports provided: RenderTarget */function(e,t,r){"use strict";r.r(t),r.d(t,"RenderTarget",(function(){return u}));var i=r(/*! ../core/Texture.js */"./js/vendor/curtainsjs/core/Texture.js"),n=r(/*! ../utils/utils.js */"./js/vendor/curtainsjs/utils/utils.js");function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(n=i.key,a=void 0,a=function(e,t){if("object"!==s(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!==s(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(n,"string"),"symbol"===s(a)?a:String(a)),i)}var n,a}var u=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=r.shaderPass,s=r.depth,o=void 0!==s&&s,u=r.clear,l=void 0===u||u,h=r.maxWidth,c=r.maxHeight,d=r.minWidth,f=void 0===d?1024:d,p=r.minHeight,g=void 0===p?1024:p,m=r.texturesOptions,v=void 0===m?{}:m;if(a(this,e),this.type="RenderTarget",(t=t&&t.renderer||t)&&"Renderer"===t.type){if(!t.gl)return void(t.production||Object(n.throwError)(this.type+": Unable to create a "+this.type+" because the Renderer WebGL context is not defined"))}else Object(n.throwError)(this.type+": Renderer not passed as first argument",t);this.renderer=t,this.gl=this.renderer.gl,this.index=this.renderer.renderTargets.length,this._shaderPass=i,this._depth=o,this._shouldClear=l,this._maxSize={width:h?Math.min(this.renderer.state.maxTextureSize/4,h):this.renderer.state.maxTextureSize/4,height:c?Math.min(this.renderer.state.maxTextureSize/4,c):this.renderer.state.maxTextureSize/4},this._minSize={width:f*this.renderer.pixelRatio,height:g*this.renderer.pixelRatio},v=Object.assign({sampler:"uRenderTexture",isFBOTexture:!0,premultiplyAlpha:!1,anisotropy:1,generateMipmap:!1,floatingPoint:"none",wrapS:this.gl.CLAMP_TO_EDGE,wrapT:this.gl.CLAMP_TO_EDGE,minFilter:this.gl.LINEAR,magFilter:this.gl.LINEAR},v),this._texturesOptions=v,this.userData={},this.uuid=Object(n.generateUUID)(),this.renderer.renderTargets.push(this),this.renderer.onSceneChange(),this._initRenderTarget()}var t,r,s;return t=e,(r=[{key:"_initRenderTarget",value:function(){this._setSize(),this.textures=[],this._createFrameBuffer()}},{key:"_restoreContext",value:function(){this._setSize(),this._createFrameBuffer()}},{key:"_setSize",value:function(){this._shaderPass&&this._shaderPass._isScenePass?this._size={width:this.renderer._boundingRect.width,height:this.renderer._boundingRect.height}:this._size={width:Math.min(this._maxSize.width,Math.max(this._minSize.width,this.renderer._boundingRect.width)),height:Math.min(this._maxSize.height,Math.max(this._minSize.height,this.renderer._boundingRect.height))}}},{key:"resize",value:function(){this._shaderPass&&(this._setSize(),this.textures[0].resize(),this.renderer.bindFrameBuffer(this,!0),this._depth&&this._bindDepthBuffer(),this.renderer.bindFrameBuffer(null))}},{key:"_bindDepthBuffer",value:function(){this._depthBuffer&&(this.gl.bindRenderbuffer(this.gl.RENDERBUFFER,this._depthBuffer),this.gl.renderbufferStorage(this.gl.RENDERBUFFER,this.gl.DEPTH_COMPONENT16,this._size.width,this._size.height),this.gl.framebufferRenderbuffer(this.gl.FRAMEBUFFER,this.gl.DEPTH_ATTACHMENT,this.gl.RENDERBUFFER,this._depthBuffer))}},{key:"_createFrameBuffer",value:function(){this._frameBuffer=this.gl.createFramebuffer(),this.renderer.bindFrameBuffer(this,!0),this.textures.length?(this.textures[0]._parent=this,this.textures[0]._restoreContext()):new i.Texture(this.renderer,this._texturesOptions).addParent(this),this.gl.framebufferTexture2D(this.gl.FRAMEBUFFER,this.gl.COLOR_ATTACHMENT0,this.gl.TEXTURE_2D,this.textures[0]._sampler.texture,0),this._depth&&(this._depthBuffer=this.gl.createRenderbuffer(),this._bindDepthBuffer()),this.renderer.bindFrameBuffer(null)}},{key:"getTexture",value:function(){return this.textures[0]}},{key:"remove",value:function(){this._shaderPass?this.renderer.production||Object(n.throwWarning)(this.type+": You're trying to remove a RenderTarget attached to a ShaderPass. You should remove that ShaderPass instead:",this._shaderPass):(this._dispose(),this.renderer.removeRenderTarget(this))}},{key:"_dispose",value:function(){this._frameBuffer&&(this.gl.deleteFramebuffer(this._frameBuffer),this._frameBuffer=null),this._depthBuffer&&(this.gl.deleteRenderbuffer(this._depthBuffer),this._depthBuffer=null),this.textures[0]._dispose(),this.textures=[]}}])&&o(t.prototype,r),s&&o(t,s),Object.defineProperty(t,"prototype",{writable:!1}),e}()},"./js/vendor/curtainsjs/framebuffers/ShaderPass.js":
/*!*********************************************************!*\
  !*** ./js/vendor/curtainsjs/framebuffers/ShaderPass.js ***!
  \*********************************************************/
/*! exports provided: ShaderPass */function(e,t,r){"use strict";r.r(t),r.d(t,"ShaderPass",(function(){return p}));var i=r(/*! ../core/DOMMesh.js */"./js/vendor/curtainsjs/core/DOMMesh.js"),n=r(/*! ./RenderTarget.js */"./js/vendor/curtainsjs/framebuffers/RenderTarget.js"),s=r(/*! ../core/Texture.js */"./js/vendor/curtainsjs/core/Texture.js");function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(n=i.key,s=void 0,s=function(e,t){if("object"!==a(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!==a(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(n,"string"),"symbol"===a(s)?s:String(s)),i)}var n,s}function l(e,t){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,i=f(e);if(t){var n=f(this).constructor;r=Reflect.construct(i,arguments,n)}else r=i.apply(this,arguments);return c(this,r)}}function c(e,t){if(t&&("object"===a(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return d(e)}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&l(e,t)}(f,e);var t,r,i,a=h(f);function f(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=r.widthSegments,n=r.heightSegments,s=r.renderOrder,u=r.depthTest,l=r.cullFace,h=r.uniforms,p=r.vertexShaderID,g=r.fragmentShaderID,m=r.vertexShader,v=r.fragmentShader,y=r.texturesOptions,_=r.crossOrigin,b=r.depth,x=void 0!==b&&b,w=r.clear,S=void 0===w||w,P=r.renderTarget;return o(this,f),i=1,n=1,l="back",(t=a.call(this,e,e.container,"ShaderPass",{widthSegments:i,heightSegments:n,renderOrder:s,depthTest:u,cullFace:l,uniforms:h,vertexShaderID:p,fragmentShaderID:g,vertexShader:m,fragmentShader:v,texturesOptions:y,crossOrigin:_})).gl?(t._isScenePass=!0,t.index=t.renderer.shaderPasses.length,t._depth=x,t._shouldClear=S,t.target=P,t.target&&(t._isScenePass=!1,t._shouldClear=t.target._shouldClear),t._program.compiled&&(t._initShaderPass(),t.renderer.shaderPasses.push(d(t)),t.renderer.nextRender.add((function(){t.renderer.scene.addShaderPass(d(t))}))),t):c(t)}return t=f,(r=[{key:"_programRestored",value:function(){this.renderer.scene.addShaderPass(this);for(var e=0;e<this.textures.length;e++)this.textures[e]._parent=this,this.textures[e]._restoreContext();this._canDraw=!0}},{key:"_initShaderPass",value:function(){this.target?(this.setRenderTarget(this.target),this.target._shaderPass=this):this._createFrameBuffer(),new s.Texture(this.renderer,{sampler:"uRenderTexture",isFBOTexture:!0,fromTexture:this.target.getTexture()}).addParent(this),this.loader._setLoaderSize(0),this._canDraw=!0,this.renderer.needRender()}},{key:"_createFrameBuffer",value:function(){var e=new n.RenderTarget(this.renderer,{shaderPass:this,clear:this._shouldClear,depth:this._depth,texturesOptions:this._texturesOptions});this.setRenderTarget(e)}},{key:"_startDrawing",value:function(){this._canDraw&&(this._onRenderCallback&&this._onRenderCallback(),this._isScenePass?this.renderer.state.scenePassIndex+1<this.renderer.scene.stacks.scenePasses.length?(this.renderer.bindFrameBuffer(this.renderer.scene.stacks.scenePasses[this.renderer.state.scenePassIndex+1].target),this.renderer.state.scenePassIndex++):this.renderer.bindFrameBuffer(null):null===this.renderer.state.scenePassIndex&&this.renderer.bindFrameBuffer(null),this.renderer.state.forceBufferUpdate=!0,this._draw())}}])&&u(t.prototype,r),i&&u(t,i),Object.defineProperty(t,"prototype",{writable:!1}),f}(i.DOMMesh)},"./js/vendor/curtainsjs/index.mjs":
/*!****************************************!*\
  !*** ./js/vendor/curtainsjs/index.mjs ***!
  \****************************************/
/*! exports provided: Curtains, Plane, Texture, RenderTarget, ShaderPass, TextureLoader, Vec2, Vec3, Mat4, Quat, PingPongPlane, FXAAPass */function(e,t,r){"use strict";r.r(t);var i=r(/*! ./core/Curtains.js */"./js/vendor/curtainsjs/core/Curtains.js");r.d(t,"Curtains",(function(){return i.Curtains}));var n=r(/*! ./core/Plane.js */"./js/vendor/curtainsjs/core/Plane.js");r.d(t,"Plane",(function(){return n.Plane}));var s=r(/*! ./core/Texture.js */"./js/vendor/curtainsjs/core/Texture.js");r.d(t,"Texture",(function(){return s.Texture}));var a=r(/*! ./framebuffers/RenderTarget.js */"./js/vendor/curtainsjs/framebuffers/RenderTarget.js");r.d(t,"RenderTarget",(function(){return a.RenderTarget}));var o=r(/*! ./framebuffers/ShaderPass.js */"./js/vendor/curtainsjs/framebuffers/ShaderPass.js");r.d(t,"ShaderPass",(function(){return o.ShaderPass}));var u=r(/*! ./loaders/TextureLoader.js */"./js/vendor/curtainsjs/loaders/TextureLoader.js");r.d(t,"TextureLoader",(function(){return u.TextureLoader}));var l=r(/*! ./math/Vec2.js */"./js/vendor/curtainsjs/math/Vec2.js");r.d(t,"Vec2",(function(){return l.Vec2}));var h=r(/*! ./math/Vec3.js */"./js/vendor/curtainsjs/math/Vec3.js");r.d(t,"Vec3",(function(){return h.Vec3}));var c=r(/*! ./math/Mat4.js */"./js/vendor/curtainsjs/math/Mat4.js");r.d(t,"Mat4",(function(){return c.Mat4}));var d=r(/*! ./math/Quat.js */"./js/vendor/curtainsjs/math/Quat.js");r.d(t,"Quat",(function(){return d.Quat}));var f=r(/*! ./extras/PingPongPlane.js */"./js/vendor/curtainsjs/extras/PingPongPlane.js");r.d(t,"PingPongPlane",(function(){return f.PingPongPlane}));var p=r(/*! ./extras/FXAAPass.js */"./js/vendor/curtainsjs/extras/FXAAPass.js");r.d(t,"FXAAPass",(function(){return p.FXAAPass}))},"./js/vendor/curtainsjs/loaders/PlaneTextureLoader.js":
/*!************************************************************!*\
  !*** ./js/vendor/curtainsjs/loaders/PlaneTextureLoader.js ***!
  \************************************************************/
/*! exports provided: PlaneTextureLoader */function(e,t,r){"use strict";r.r(t),r.d(t,"PlaneTextureLoader",(function(){return d}));var i=r(/*! ./TextureLoader.js */"./js/vendor/curtainsjs/loaders/TextureLoader.js"),n=r(/*! ../utils/utils.js */"./js/vendor/curtainsjs/utils/utils.js");function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(n=i.key,a=void 0,a=function(e,t){if("object"!==s(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!==s(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(n,"string"),"symbol"===s(a)?a:String(a)),i)}var n,a}function u(e,t){return(u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,i=c(e);if(t){var n=c(this).constructor;r=Reflect.construct(i,arguments,n)}else r=i.apply(this,arguments);return h(this,r)}}function h(e,t){if(t&&("object"===s(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u(e,t)}(h,e);var t,r,i,s=l(h);function h(e,t){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=i.sourcesLoaded,u=void 0===o?0:o,l=i.sourcesToLoad,c=void 0===l?0:l,d=i.complete,f=void 0!==d&&d,p=i.onComplete,g=void 0===p?function(){}:p;return a(this,h),(r=s.call(this,e,t.crossOrigin)).type="PlaneTextureLoader",r._parent=t,"Plane"!==r._parent.type&&"PingPongPlane"!==r._parent.type&&"ShaderPass"!==r._parent.type&&(Object(n.throwWarning)(r.type+": Wrong parent type assigned to this loader"),r._parent=null),r.sourcesLoaded=u,r.sourcesToLoad=c,r.complete=f,r.onComplete=g,r}return t=h,(r=[{key:"_setLoaderSize",value:function(e){var t=this;this.sourcesToLoad=e,0===this.sourcesToLoad&&(this.complete=!0,this.renderer.nextRender.add((function(){return t.onComplete&&t.onComplete()})))}},{key:"_increment",value:function(){var e=this;this.sourcesLoaded++,this.sourcesLoaded>=this.sourcesToLoad&&!this.complete&&(this.complete=!0,this.renderer.nextRender.add((function(){return e.onComplete&&e.onComplete()})))}},{key:"_addSourceToParent",value:function(e,t){if("image"===t){var r=this._parent.images;!r.find((function(t){return t.src===e.src}))&&r.push(e)}else if("video"===t){var i=this._parent.videos;!i.find((function(t){return t.src===e.src}))&&i.push(e)}else if("canvas"===t){var n=this._parent.canvases;!n.find((function(t){return t.isSameNode(e)}))&&n.push(e)}}},{key:"_addToParent",value:function(e,t,r){this._addSourceToParent(t,r),this._parent&&e.addParent(this._parent)}}])&&o(t.prototype,r),i&&o(t,i),Object.defineProperty(t,"prototype",{writable:!1}),h}(i.TextureLoader)},"./js/vendor/curtainsjs/loaders/TextureLoader.js":
/*!*******************************************************!*\
  !*** ./js/vendor/curtainsjs/loaders/TextureLoader.js ***!
  \*******************************************************/
/*! exports provided: TextureLoader */function(e,t,r){"use strict";r.r(t),r.d(t,"TextureLoader",(function(){return u}));var i=r(/*! ../core/Texture.js */"./js/vendor/curtainsjs/core/Texture.js"),n=r(/*! ../utils/utils.js */"./js/vendor/curtainsjs/utils/utils.js");function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(n=i.key,a=void 0,a=function(e,t){if("object"!==s(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!==s(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(n,"string"),"symbol"===s(a)?a:String(a)),i)}var n,a}var u=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"anonymous";if(a(this,e),this.type="TextureLoader",(t=t&&t.renderer||t)&&"Renderer"===t.type){if(!t.gl)return void Object(n.throwError)(this.type+": Renderer WebGL context is undefined",t)}else Object(n.throwError)(this.type+": Renderer not passed as first argument",t);this.renderer=t,this.gl=this.renderer.gl,this.crossOrigin=r,this.elements=[]}var t,r,s;return t=e,(r=[{key:"_addElement",value:function(e,t,r,i){var n={source:e,texture:t,load:this._sourceLoaded.bind(this,e,t,r),error:this._sourceLoadError.bind(this,e,i)};return this.elements.push(n),n}},{key:"_sourceLoadError",value:function(e,t,r){t&&t(e,r)}},{key:"_sourceLoaded",value:function(e,t,r){var i=this;t._sourceLoaded||(t._onSourceLoaded(e),this._parent&&(this._increment&&this._increment(),this.renderer.nextRender.add((function(){return i._parent._onLoadingCallback&&i._parent._onLoadingCallback(t)}))),r&&r(t))}},{key:"_getSourceType",value:function(e){var t;return"string"==typeof e?null!==e.match(/\.(jpeg|jpg|jfif|pjpeg|pjp|gif|bmp|png|webp|svg|avif|apng)$/)?t="image":null!==e.match(/\.(webm|mp4|mpg|mpeg|avi|ogg|ogm|ogv|mov|av1)$/)&&(t="video"):"IMG"===e.tagName.toUpperCase()?t="image":"VIDEO"===e.tagName.toUpperCase()?t="video":"CANVAS"===e.tagName.toUpperCase()&&(t="canvas"),t}},{key:"_createImage",value:function(e){if("string"!=typeof e&&e.hasAttribute("crossOrigin"))return e;var t=new Image;return t.crossOrigin=this.crossOrigin,"string"==typeof e?t.src=e:(t.src=e.src,e.hasAttribute("data-sampler")&&t.setAttribute("data-sampler",e.getAttribute("data-sampler"))),t}},{key:"_createVideo",value:function(e){if("string"==typeof e||null===e.getAttribute("crossOrigin")){var t=document.createElement("video");return t.crossOrigin=this.crossOrigin,"string"==typeof e?t.src=e:(t.src=e.src,e.hasAttribute("data-sampler")&&t.setAttribute("data-sampler",e.getAttribute("data-sampler"))),t}return e}},{key:"loadSource",value:function(e,t,r,i){switch(this._getSourceType(e)){case"image":this.loadImage(e,t,r,i);break;case"video":this.loadVideo(e,t,r,i);break;case"canvas":this.loadCanvas(e,t,r);break;default:this._sourceLoadError(e,i,"this source could not be converted into a texture: "+e)}}},{key:"loadSources",value:function(e,t,r,i){for(var n=0;n<e.length;n++)this.loadSource(e[n],t,r,i)}},{key:"loadImage",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,s=this.renderer.cache.getTextureFromSource(e),a=Object.assign({},t);if(this._parent&&(a=Object.assign(a,this._parent._texturesOptions)),a.loader=this,s){a.sampler="string"!=typeof e&&e.hasAttribute("data-sampler")?e.getAttribute("data-sampler"):a.sampler,a.fromTexture=s;var o=new i.Texture(this.renderer,a);return this._sourceLoaded(s.source,o,r),void(this._parent&&this._addToParent(o,s.source,"image"))}var u=this._createImage(e);a.sampler=u.hasAttribute("data-sampler")?u.getAttribute("data-sampler"):a.sampler;var l=new i.Texture(this.renderer,a),h=this._addElement(u,l,r,n);u.complete?this._sourceLoaded(u,l,r):u.decode?u.decode().then(this._sourceLoaded.bind(this,u,l,r)).catch((function(){u.addEventListener("load",h.load,!1),u.addEventListener("error",h.error,!1)})):(u.addEventListener("load",h.load,!1),u.addEventListener("error",h.error,!1)),this._parent&&this._addToParent(l,u,"image")}},{key:"loadImages",value:function(e,t,r,i){for(var n=0;n<e.length;n++)this.loadImage(e[n],t,r,i)}},{key:"loadVideo",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,s=this._createVideo(e);s.preload=!0,s.muted=!0,s.loop=!0,s.setAttribute("playsinline",""),s.crossOrigin=this.crossOrigin;var a=Object.assign({},t);this._parent&&(a=Object.assign(t,this._parent._texturesOptions)),a.loader=this,a.sampler=s.hasAttribute("data-sampler")?s.getAttribute("data-sampler"):a.sampler;var o=new i.Texture(this.renderer,a),u=this._addElement(s,o,r,n);s.addEventListener("canplaythrough",u.load,!1),s.addEventListener("error",u.error,!1),s.readyState>=s.HAVE_FUTURE_DATA&&r&&this._sourceLoaded(s,o,r),s.load(),this._addToParent&&this._addToParent(o,s,"video"),"requestVideoFrameCallback"in HTMLVideoElement.prototype&&(u.videoFrameCallback=o._videoFrameCallback.bind(o),o._videoFrameCallbackID=s.requestVideoFrameCallback(u.videoFrameCallback))}},{key:"loadVideos",value:function(e,t,r,i){for(var n=0;n<e.length;n++)this.loadVideo(e[n],t,r,i)}},{key:"loadCanvas",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0,n=Object.assign({},t);this._parent&&(n=Object.assign(t,this._parent._texturesOptions)),n.loader=this,n.sampler=e.hasAttribute("data-sampler")?e.getAttribute("data-sampler"):n.sampler;var s=new i.Texture(this.renderer,n);this._addElement(e,s,r,null),this._sourceLoaded(e,s,r),this._parent&&this._addToParent(s,e,"canvas")}},{key:"loadCanvases",value:function(e,t,r){for(var i=0;i<e.length;i++)this.loadCanvas(e[i],t,r)}},{key:"_removeSource",value:function(e){var t=this.elements.find((function(t){return t.texture.uuid===e.uuid}));t&&("image"===e.sourceType?t.source.removeEventListener("load",t.load,!1):"video"===e.sourceType&&(t.videoFrameCallback&&e._videoFrameCallbackID&&t.source.cancelVideoFrameCallback(e._videoFrameCallbackID),t.source.removeEventListener("canplaythrough",t.load,!1),t.source.pause(),t.source.removeAttribute("src"),t.source.load()),t.source.removeEventListener("error",t.error,!1))}}])&&o(t.prototype,r),s&&o(t,s),Object.defineProperty(t,"prototype",{writable:!1}),e}()},"./js/vendor/curtainsjs/math/Mat4.js":
/*!*******************************************!*\
  !*** ./js/vendor/curtainsjs/math/Mat4.js ***!
  \*******************************************/
/*! exports provided: Mat4 */function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(s=n.key,a=void 0,a=function(e,t){if("object"!==i(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(s,"string"),"symbol"===i(a)?a:String(a)),n)}var s,a}r.r(t),r.d(t,"Mat4",(function(){return a}));var a=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);n(this,e),this.type="Mat4",this.elements=t}var t,r,i;return t=e,(r=[{key:"setFromArray",value:function(e){for(var t=0;t<this.elements.length;t++)this.elements[t]=e[t];return this}},{key:"copy",value:function(e){var t=e.elements;return this.elements[0]=t[0],this.elements[1]=t[1],this.elements[2]=t[2],this.elements[3]=t[3],this.elements[4]=t[4],this.elements[5]=t[5],this.elements[6]=t[6],this.elements[7]=t[7],this.elements[8]=t[8],this.elements[9]=t[9],this.elements[10]=t[10],this.elements[11]=t[11],this.elements[12]=t[12],this.elements[13]=t[13],this.elements[14]=t[14],this.elements[15]=t[15],this}},{key:"clone",value:function(){return(new e).copy(this)}},{key:"multiply",value:function(t){var r=this.elements,i=t.elements,n=new e;return n.elements[0]=i[0]*r[0]+i[1]*r[4]+i[2]*r[8]+i[3]*r[12],n.elements[1]=i[0]*r[1]+i[1]*r[5]+i[2]*r[9]+i[3]*r[13],n.elements[2]=i[0]*r[2]+i[1]*r[6]+i[2]*r[10]+i[3]*r[14],n.elements[3]=i[0]*r[3]+i[1]*r[7]+i[2]*r[11]+i[3]*r[15],n.elements[4]=i[4]*r[0]+i[5]*r[4]+i[6]*r[8]+i[7]*r[12],n.elements[5]=i[4]*r[1]+i[5]*r[5]+i[6]*r[9]+i[7]*r[13],n.elements[6]=i[4]*r[2]+i[5]*r[6]+i[6]*r[10]+i[7]*r[14],n.elements[7]=i[4]*r[3]+i[5]*r[7]+i[6]*r[11]+i[7]*r[15],n.elements[8]=i[8]*r[0]+i[9]*r[4]+i[10]*r[8]+i[11]*r[12],n.elements[9]=i[8]*r[1]+i[9]*r[5]+i[10]*r[9]+i[11]*r[13],n.elements[10]=i[8]*r[2]+i[9]*r[6]+i[10]*r[10]+i[11]*r[14],n.elements[11]=i[8]*r[3]+i[9]*r[7]+i[10]*r[11]+i[11]*r[15],n.elements[12]=i[12]*r[0]+i[13]*r[4]+i[14]*r[8]+i[15]*r[12],n.elements[13]=i[12]*r[1]+i[13]*r[5]+i[14]*r[9]+i[15]*r[13],n.elements[14]=i[12]*r[2]+i[13]*r[6]+i[14]*r[10]+i[15]*r[14],n.elements[15]=i[12]*r[3]+i[13]*r[7]+i[14]*r[11]+i[15]*r[15],n}},{key:"getInverse",value:function(){var t=this.elements,r=new e,i=r.elements,n=t[0],s=t[1],a=t[2],o=t[3],u=t[4],l=t[5],h=t[6],c=t[7],d=t[8],f=t[9],p=t[10],g=t[11],m=t[12],v=t[13],y=t[14],_=t[15],b=n*l-s*u,x=n*h-a*u,w=n*c-o*u,S=s*h-a*l,P=s*c-o*l,k=a*c-o*h,j=d*v-f*m,R=d*y-p*m,T=d*_-g*m,E=f*y-p*v,O=f*_-g*v,C=p*_-g*y,M=b*C-x*O+w*E+S*T-P*R+k*j;return M?(M=1/M,i[0]=(l*C-h*O+c*E)*M,i[1]=(a*O-s*C-o*E)*M,i[2]=(v*k-y*P+_*S)*M,i[3]=(p*P-f*k-g*S)*M,i[4]=(h*T-u*C-c*R)*M,i[5]=(n*C-a*T+o*R)*M,i[6]=(y*w-m*k-_*x)*M,i[7]=(d*k-p*w+g*x)*M,i[8]=(u*O-l*T+c*j)*M,i[9]=(s*T-n*O-o*j)*M,i[10]=(m*P-v*w+_*b)*M,i[11]=(f*w-d*P-g*b)*M,i[12]=(l*R-u*E-h*j)*M,i[13]=(n*E-s*R+a*j)*M,i[14]=(v*x-m*S-y*b)*M,i[15]=(d*S-f*x+p*b)*M,r):null}},{key:"scale",value:function(e){var t=this.elements;return t[0]*=e.x,t[1]*=e.x,t[2]*=e.x,t[3]*=e.x,t[4]*=e.y,t[5]*=e.y,t[6]*=e.y,t[7]*=e.y,t[8]*=e.z,t[9]*=e.z,t[10]*=e.z,t[11]*=e.z,this}},{key:"compose",value:function(e,t,r){var i=this.elements,n=t.elements[0],s=t.elements[1],a=t.elements[2],o=t.elements[3],u=n+n,l=s+s,h=a+a,c=n*u,d=n*l,f=n*h,p=s*l,g=s*h,m=a*h,v=o*u,y=o*l,_=o*h,b=r.x,x=r.y,w=r.z;return i[0]=(1-(p+m))*b,i[1]=(d+_)*b,i[2]=(f-y)*b,i[3]=0,i[4]=(d-_)*x,i[5]=(1-(c+m))*x,i[6]=(g+v)*x,i[7]=0,i[8]=(f+y)*w,i[9]=(g-v)*w,i[10]=(1-(c+p))*w,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}},{key:"composeFromOrigin",value:function(e,t,r,i){var n=this.elements,s=t.elements[0],a=t.elements[1],o=t.elements[2],u=t.elements[3],l=s+s,h=a+a,c=o+o,d=s*l,f=s*h,p=s*c,g=a*h,m=a*c,v=o*c,y=u*l,_=u*h,b=u*c,x=r.x,w=r.y,S=r.z,P=i.x,k=i.y,j=i.z,R=(1-(g+v))*x,T=(f+b)*x,E=(p-_)*x,O=(f-b)*w,C=(1-(d+v))*w,M=(m+y)*w,A=(p+_)*S,F=(m-y)*S,D=(1-(d+g))*S;return n[0]=R,n[1]=T,n[2]=E,n[3]=0,n[4]=O,n[5]=C,n[6]=M,n[7]=0,n[8]=A,n[9]=F,n[10]=D,n[11]=0,n[12]=e.x+P-(R*P+O*k+A*j),n[13]=e.y+k-(T*P+C*k+F*j),n[14]=e.z+j-(E*P+M*k+D*j),n[15]=1,this}}])&&s(t.prototype,r),i&&s(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}()},"./js/vendor/curtainsjs/math/Quat.js":
/*!*******************************************!*\
  !*** ./js/vendor/curtainsjs/math/Quat.js ***!
  \*******************************************/
/*! exports provided: Quat */function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(s=n.key,a=void 0,a=function(e,t){if("object"!==i(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(s,"string"),"symbol"===i(a)?a:String(a)),n)}var s,a}r.r(t),r.d(t,"Quat",(function(){return a}));var a=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Float32Array([0,0,0,1]),r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"XYZ";n(this,e),this.type="Quat",this.elements=t,this.axisOrder=r}var t,r,i;return t=e,(r=[{key:"setFromArray",value:function(e){return this.elements[0]=e[0],this.elements[1]=e[1],this.elements[2]=e[2],this.elements[3]=e[3],this}},{key:"setAxisOrder",value:function(e){switch(e=e.toUpperCase()){case"XYZ":case"YXZ":case"ZXY":case"ZYX":case"YZX":case"XZY":this.axisOrder=e;break;default:this.axisOrder="XYZ"}return this}},{key:"copy",value:function(e){return this.elements=e.elements,this.axisOrder=e.axisOrder,this}},{key:"clone",value:function(){return(new e).copy(this)}},{key:"equals",value:function(e){return this.elements[0]===e.elements[0]&&this.elements[1]===e.elements[1]&&this.elements[2]===e.elements[2]&&this.elements[3]===e.elements[3]&&this.axisOrder===e.axisOrder}},{key:"setFromVec3",value:function(e){var t=.5*e.x,r=.5*e.y,i=.5*e.z,n=Math.cos(t),s=Math.cos(r),a=Math.cos(i),o=Math.sin(t),u=Math.sin(r),l=Math.sin(i);return"XYZ"===this.axisOrder?(this.elements[0]=o*s*a+n*u*l,this.elements[1]=n*u*a-o*s*l,this.elements[2]=n*s*l+o*u*a,this.elements[3]=n*s*a-o*u*l):"YXZ"===this.axisOrder?(this.elements[0]=o*s*a+n*u*l,this.elements[1]=n*u*a-o*s*l,this.elements[2]=n*s*l-o*u*a,this.elements[3]=n*s*a+o*u*l):"ZXY"===this.axisOrder?(this.elements[0]=o*s*a-n*u*l,this.elements[1]=n*u*a+o*s*l,this.elements[2]=n*s*l+o*u*a,this.elements[3]=n*s*a-o*u*l):"ZYX"===this.axisOrder?(this.elements[0]=o*s*a-n*u*l,this.elements[1]=n*u*a+o*s*l,this.elements[2]=n*s*l-o*u*a,this.elements[3]=n*s*a+o*u*l):"YZX"===this.axisOrder?(this.elements[0]=o*s*a+n*u*l,this.elements[1]=n*u*a+o*s*l,this.elements[2]=n*s*l-o*u*a,this.elements[3]=n*s*a-o*u*l):"XZY"===this.axisOrder&&(this.elements[0]=o*s*a-n*u*l,this.elements[1]=n*u*a-o*s*l,this.elements[2]=n*s*l+o*u*a,this.elements[3]=n*s*a+o*u*l),this}}])&&s(t.prototype,r),i&&s(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}()},"./js/vendor/curtainsjs/math/Vec2.js":
/*!*******************************************!*\
  !*** ./js/vendor/curtainsjs/math/Vec2.js ***!
  \*******************************************/
/*! exports provided: Vec2 */function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(s=n.key,a=void 0,a=function(e,t){if("object"!==i(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(s,"string"),"symbol"===i(a)?a:String(a)),n)}var s,a}r.r(t),r.d(t,"Vec2",(function(){return a}));var a=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t;n(this,e),this.type="Vec2",this._x=t,this._y=r}var t,r,i;return t=e,(r=[{key:"x",get:function(){return this._x},set:function(e){var t=e!==this._x;this._x=e,t&&this._onChangeCallback&&this._onChangeCallback()}},{key:"y",get:function(){return this._y},set:function(e){var t=e!==this._y;this._y=e,t&&this._onChangeCallback&&this._onChangeCallback()}},{key:"onChange",value:function(e){return e&&(this._onChangeCallback=e),this}},{key:"set",value:function(e,t){return this._x=e,this._y=t,this}},{key:"add",value:function(e){return this._x+=e.x,this._y+=e.y,this}},{key:"addScalar",value:function(e){return this._x+=e,this._y+=e,this}},{key:"sub",value:function(e){return this._x-=e.x,this._y-=e.y,this}},{key:"subScalar",value:function(e){return this._x-=e,this._y-=e,this}},{key:"multiply",value:function(e){return this._x*=e.x,this._y*=e.y,this}},{key:"multiplyScalar",value:function(e){return this._x*=e,this._y*=e,this}},{key:"copy",value:function(e){return this._x=e.x,this._y=e.y,this}},{key:"clone",value:function(){return new e(this._x,this._y)}},{key:"sanitizeNaNValuesWith",value:function(e){return this._x=isNaN(this._x)?e.x:parseFloat(this._x),this._y=isNaN(this._y)?e.y:parseFloat(this._y),this}},{key:"max",value:function(e){return this._x=Math.max(this._x,e.x),this._y=Math.max(this._y,e.y),this}},{key:"min",value:function(e){return this._x=Math.min(this._x,e.x),this._y=Math.min(this._y,e.y),this}},{key:"equals",value:function(e){return this._x===e.x&&this._y===e.y}},{key:"normalize",value:function(){var e=this._x*this._x+this._y*this._y;return e>0&&(e=1/Math.sqrt(e)),this._x*=e,this._y*=e,this}},{key:"dot",value:function(e){return this._x*e.x+this._y*e.y}}])&&s(t.prototype,r),i&&s(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}()},"./js/vendor/curtainsjs/math/Vec3.js":
/*!*******************************************!*\
  !*** ./js/vendor/curtainsjs/math/Vec3.js ***!
  \*******************************************/
/*! exports provided: Vec3 */function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(s=n.key,a=void 0,a=function(e,t){if("object"!==i(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(s,"string"),"symbol"===i(a)?a:String(a)),n)}var s,a}r.r(t),r.d(t,"Vec3",(function(){return a}));var a=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t;n(this,e),this.type="Vec3",this._x=t,this._y=r,this._z=i}var t,r,i;return t=e,(r=[{key:"x",get:function(){return this._x},set:function(e){var t=e!==this._x;this._x=e,t&&this._onChangeCallback&&this._onChangeCallback()}},{key:"y",get:function(){return this._y},set:function(e){var t=e!==this._y;this._y=e,t&&this._onChangeCallback&&this._onChangeCallback()}},{key:"z",get:function(){return this._z},set:function(e){var t=e!==this._z;this._z=e,t&&this._onChangeCallback&&this._onChangeCallback()}},{key:"onChange",value:function(e){return e&&(this._onChangeCallback=e),this}},{key:"set",value:function(e,t,r){return this._x=e,this._y=t,this._z=r,this}},{key:"add",value:function(e){return this._x+=e.x,this._y+=e.y,this._z+=e.z,this}},{key:"addScalar",value:function(e){return this._x+=e,this._y+=e,this._z+=e,this}},{key:"sub",value:function(e){return this._x-=e.x,this._y-=e.y,this._z-=e.z,this}},{key:"subScalar",value:function(e){return this._x-=e,this._y-=e,this._z-=e,this}},{key:"multiply",value:function(e){return this._x*=e.x,this._y*=e.y,this._z*=e.z,this}},{key:"multiplyScalar",value:function(e){return this._x*=e,this._y*=e,this._z*=e,this}},{key:"copy",value:function(e){return this._x=e.x,this._y=e.y,this._z=e.z,this}},{key:"clone",value:function(){return new e(this._x,this._y,this._z)}},{key:"sanitizeNaNValuesWith",value:function(e){return this._x=isNaN(this._x)?e.x:parseFloat(this._x),this._y=isNaN(this._y)?e.y:parseFloat(this._y),this._z=isNaN(this._z)?e.z:parseFloat(this._z),this}},{key:"max",value:function(e){return this._x=Math.max(this._x,e.x),this._y=Math.max(this._y,e.y),this._z=Math.max(this._z,e.z),this}},{key:"min",value:function(e){return this._x=Math.min(this._x,e.x),this._y=Math.min(this._y,e.y),this._z=Math.min(this._z,e.z),this}},{key:"equals",value:function(e){return this._x===e.x&&this._y===e.y&&this._z===e.z}},{key:"normalize",value:function(){var e=this._x*this._x+this._y*this._y+this._z*this._z;return e>0&&(e=1/Math.sqrt(e)),this._x*=e,this._y*=e,this._z*=e,this}},{key:"dot",value:function(e){return this._x*e.x+this._y*e.y+this._z*e.z}},{key:"applyMat4",value:function(e){var t=this._x,r=this._y,i=this._z,n=e.elements,s=n[3]*t+n[7]*r+n[11]*i+n[15];return s=s||1,this._x=(n[0]*t+n[4]*r+n[8]*i+n[12])/s,this._y=(n[1]*t+n[5]*r+n[9]*i+n[13])/s,this._z=(n[2]*t+n[6]*r+n[10]*i+n[14])/s,this}},{key:"applyQuat",value:function(e){var t=this._x,r=this._y,i=this._z,n=e.elements[0],s=e.elements[1],a=e.elements[2],o=e.elements[3],u=o*t+s*i-a*r,l=o*r+a*t-n*i,h=o*i+n*r-s*t,c=-n*t-s*r-a*i;return this._x=u*o+c*-n+l*-a-h*-s,this._y=l*o+c*-s+h*-n-u*-a,this._z=h*o+c*-a+u*-s-l*-n,this}},{key:"project",value:function(e){return this.applyMat4(e.viewMatrix).applyMat4(e.projectionMatrix),this}},{key:"unproject",value:function(e){return this.applyMat4(e.projectionMatrix.getInverse()).applyMat4(e.worldMatrix),this}}])&&s(t.prototype,r),i&&s(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}()},"./js/vendor/curtainsjs/shaders/chunks/default.attributes.glsl.js":
/*!************************************************************************!*\
  !*** ./js/vendor/curtainsjs/shaders/chunks/default.attributes.glsl.js ***!
  \************************************************************************/
/*! exports provided: default */function(e,t,r){"use strict";r.r(t);t.default="\nattribute vec3 aVertexPosition;\nattribute vec2 aTextureCoord;\n".replace(/\n/g,"")},"./js/vendor/curtainsjs/shaders/chunks/default.varyings.glsl.js":
/*!**********************************************************************!*\
  !*** ./js/vendor/curtainsjs/shaders/chunks/default.varyings.glsl.js ***!
  \**********************************************************************/
/*! exports provided: default */function(e,t,r){"use strict";r.r(t);t.default="\nvarying vec3 vVertexPosition;\nvarying vec2 vTextureCoord;\n".replace(/\n/g,"")},"./js/vendor/curtainsjs/shaders/chunks/precision.medium.glsl.js":
/*!**********************************************************************!*\
  !*** ./js/vendor/curtainsjs/shaders/chunks/precision.medium.glsl.js ***!
  \**********************************************************************/
/*! exports provided: default */function(e,t,r){"use strict";r.r(t);t.default="\nprecision mediump float;\n".replace(/\n/g,"")},"./js/vendor/curtainsjs/shaders/plane.fragment.glsl.js":
/*!*************************************************************!*\
  !*** ./js/vendor/curtainsjs/shaders/plane.fragment.glsl.js ***!
  \*************************************************************/
/*! exports provided: default */function(e,t,r){"use strict";r.r(t);var i=r(/*! ./chunks/precision.medium.glsl.js */"./js/vendor/curtainsjs/shaders/chunks/precision.medium.glsl.js"),n=r(/*! ./chunks/default.varyings.glsl.js */"./js/vendor/curtainsjs/shaders/chunks/default.varyings.glsl.js"),s=i.default+n.default+"\nvoid main() {\n    gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);\n}\n";t.default=s.replace(/\n/g,"")},"./js/vendor/curtainsjs/shaders/plane.vertex.glsl.js":
/*!***********************************************************!*\
  !*** ./js/vendor/curtainsjs/shaders/plane.vertex.glsl.js ***!
  \***********************************************************/
/*! exports provided: default */function(e,t,r){"use strict";r.r(t);var i=r(/*! ./chunks/precision.medium.glsl.js */"./js/vendor/curtainsjs/shaders/chunks/precision.medium.glsl.js"),n=r(/*! ./chunks/default.attributes.glsl.js */"./js/vendor/curtainsjs/shaders/chunks/default.attributes.glsl.js"),s=r(/*! ./chunks/default.varyings.glsl.js */"./js/vendor/curtainsjs/shaders/chunks/default.varyings.glsl.js"),a=i.default+n.default+s.default+"\nuniform mat4 uMVMatrix;\nuniform mat4 uPMatrix;\n\nvoid main() {\n    vTextureCoord = aTextureCoord;\n    vVertexPosition = aVertexPosition;\n    \n    gl_Position = uPMatrix * uMVMatrix * vec4(aVertexPosition, 1.0);\n}\n";t.default=a.replace(/\n/g,"")},"./js/vendor/curtainsjs/shaders/shaderpass.fragment.glsl.js":
/*!******************************************************************!*\
  !*** ./js/vendor/curtainsjs/shaders/shaderpass.fragment.glsl.js ***!
  \******************************************************************/
/*! exports provided: default */function(e,t,r){"use strict";r.r(t);var i=r(/*! ./chunks/precision.medium.glsl.js */"./js/vendor/curtainsjs/shaders/chunks/precision.medium.glsl.js"),n=r(/*! ./chunks/default.varyings.glsl.js */"./js/vendor/curtainsjs/shaders/chunks/default.varyings.glsl.js"),s=i.default+n.default+"\nuniform sampler2D uRenderTexture;\n\nvoid main() {\n    gl_FragColor = texture2D(uRenderTexture, vTextureCoord);\n}\n";t.default=s.replace(/\n/g,"")},"./js/vendor/curtainsjs/shaders/shaderpass.vertex.glsl.js":
/*!****************************************************************!*\
  !*** ./js/vendor/curtainsjs/shaders/shaderpass.vertex.glsl.js ***!
  \****************************************************************/
/*! exports provided: default */function(e,t,r){"use strict";r.r(t);var i=r(/*! ./chunks/precision.medium.glsl.js */"./js/vendor/curtainsjs/shaders/chunks/precision.medium.glsl.js"),n=r(/*! ./chunks/default.attributes.glsl.js */"./js/vendor/curtainsjs/shaders/chunks/default.attributes.glsl.js"),s=r(/*! ./chunks/default.varyings.glsl.js */"./js/vendor/curtainsjs/shaders/chunks/default.varyings.glsl.js"),a=i.default+n.default+s.default+"\nvoid main() {\n    vTextureCoord = aTextureCoord;\n    vVertexPosition = aVertexPosition;\n    \n    gl_Position = vec4(aVertexPosition, 1.0);\n}\n";t.default=a.replace(/\n/g,"")},"./js/vendor/curtainsjs/utils/CacheManager.js":
/*!****************************************************!*\
  !*** ./js/vendor/curtainsjs/utils/CacheManager.js ***!
  \****************************************************/
/*! exports provided: CacheManager */function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(s=n.key,a=void 0,a=function(e,t){if("object"!==i(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(s,"string"),"symbol"===i(a)?a:String(a)),n)}var s,a}r.r(t),r.d(t,"CacheManager",(function(){return s}));var s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.geometries=[],this.clear()}var t,r,i;return t=e,(r=[{key:"clear",value:function(){this.textures=[],this.programs=[]}},{key:"getGeometryFromID",value:function(e){return this.geometries.find((function(t){return t.id===e}))}},{key:"addGeometry",value:function(e,t,r){this.geometries.push({id:e,vertices:t,uvs:r})}},{key:"isSameShader",value:function(e,t){return 0===e.localeCompare(t)}},{key:"getProgramFromShaders",value:function(e,t){var r=this;return this.programs.find((function(i){return r.isSameShader(i.vsCode,e)&&r.isSameShader(i.fsCode,t)}))}},{key:"addProgram",value:function(e){this.programs.push(e)}},{key:"getTextureFromSource",value:function(e){var t="string"==typeof e?e:e.src;return this.textures.find((function(e){return e.source&&e.source.src===t}))}},{key:"addTexture",value:function(e){this.getTextureFromSource(e.source)||this.textures.push(e)}},{key:"removeTexture",value:function(e){this.textures=this.textures.filter((function(t){return t.uuid!==e.uuid}))}}])&&n(t.prototype,r),i&&n(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}()},"./js/vendor/curtainsjs/utils/CallbackQueueManager.js":
/*!************************************************************!*\
  !*** ./js/vendor/curtainsjs/utils/CallbackQueueManager.js ***!
  \************************************************************/
/*! exports provided: CallbackQueueManager */function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(s=n.key,a=void 0,a=function(e,t){if("object"!==i(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(s,"string"),"symbol"===i(a)?a:String(a)),n)}var s,a}r.r(t),r.d(t,"CallbackQueueManager",(function(){return s}));var s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.clear()}var t,r,i;return t=e,(r=[{key:"clear",value:function(){this.queue=[]}},{key:"add",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i={callback:e,keep:r,timeout:null};return i.timeout=setTimeout((function(){t.queue.push(i)}),0),i}},{key:"execute",value:function(){var e=this;this.queue.map((function(t){t.callback&&t.callback(),clearTimeout(e.queue.timeout)})),this.queue=this.queue.filter((function(e){return e.keep}))}}])&&n(t.prototype,r),i&&n(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}()},"./js/vendor/curtainsjs/utils/ScrollManager.js":
/*!*****************************************************!*\
  !*** ./js/vendor/curtainsjs/utils/ScrollManager.js ***!
  \*****************************************************/
/*! exports provided: ScrollManager */function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(s=n.key,a=void 0,a=function(e,t){if("object"!==i(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(s,"string"),"symbol"===i(a)?a:String(a)),n)}var s,a}r.r(t),r.d(t,"ScrollManager",(function(){return a}));var a=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.xOffset,i=void 0===r?0:r,s=t.yOffset,a=void 0===s?0:s,o=t.lastXDelta,u=void 0===o?0:o,l=t.lastYDelta,h=void 0===l?0:l,c=t.shouldWatch,d=void 0===c||c,f=t.onScroll,p=void 0===f?function(){}:f;n(this,e),this.xOffset=i,this.yOffset=a,this.lastXDelta=u,this.lastYDelta=h,this.shouldWatch=d,this.onScroll=p,this.handler=this.scroll.bind(this,!0),this.shouldWatch&&window.addEventListener("scroll",this.handler,{passive:!0})}var t,r,i;return t=e,(r=[{key:"scroll",value:function(){this.updateScrollValues(window.pageXOffset,window.pageYOffset)}},{key:"updateScrollValues",value:function(e,t){var r=this.xOffset;this.xOffset=e,this.lastXDelta=r-this.xOffset;var i=this.yOffset;this.yOffset=t,this.lastYDelta=i-this.yOffset,this.onScroll&&this.onScroll(this.lastXDelta,this.lastYDelta)}},{key:"dispose",value:function(){this.shouldWatch&&window.removeEventListener("scroll",this.handler,{passive:!0})}}])&&s(t.prototype,r),i&&s(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}()},"./js/vendor/curtainsjs/utils/utils.js":
/*!*********************************************!*\
  !*** ./js/vendor/curtainsjs/utils/utils.js ***!
  \*********************************************/
/*! exports provided: throwWarning, throwError, generateUUID, isPowerOf2, lerp */function(e,t,r){"use strict";r.r(t),r.d(t,"throwWarning",(function(){return n})),r.d(t,"throwError",(function(){return s})),r.d(t,"generateUUID",(function(){return a})),r.d(t,"isPowerOf2",(function(){return o})),r.d(t,"lerp",(function(){return u}));var i=0;function n(){if(!(i>100)){if(100===i)console.warn("Curtains: too many warnings thrown, stop logging.");else{var e=Array.prototype.slice.call(arguments);console.warn.apply(console,e)}i++}}function s(){var e=Array.prototype.slice.call(arguments);console.error.apply(console,e)}function a(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16).toUpperCase()}))}function o(e){return 0==(e&e-1)}function u(e,t,r){return(1-r)*e+r*t}},"./js/vendor/text-texture.js":
/*!***********************************!*\
  !*** ./js/vendor/text-texture.js ***!
  \***********************************/
/*! exports provided: TextTexture */function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(s=n.key,a=void 0,a=function(e,t){if("object"!==i(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(s,"string"),"symbol"===i(a)?a:String(a)),n)}var s,a}r.r(t),r.d(t,"TextTexture",(function(){return a}));var a=function(){function e(){var t=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=r.plane,s=r.textElement,a=r.skipFontLoading,o=void 0!==a&&a,u=r.verticalAlign,l=void 0===u?"top":u,h=r.allowedLineEndSpace,c=void 0===h?.5:h,d=r.fillType,f=void 0===d?"fill":d,p=r.sampler,g=void 0===p?"uTextTexture":p,m=r.texturesOptions,v=void 0===m?{}:m,y=r.resolution,_=void 0===y?1:y,b=r.onBeforeWordMeasuring,x=void 0===b?function(){}:b,w=r.onAfterWordMeasuring,S=void 0===w?function(){}:w,P=r.onBeforeWordWriting,k=void 0===P?function(){}:P,j=r.onAfterWordWriting,R=void 0===j?function(){}:j;n(this,e);var T=["Plane","PingPongPlane","ShaderPass"];i&&i.type&&T.find((function(e){return e===i.type}))?i.gl?(this.plane=i,s||(s=this.plane.hmltElement),this.textElement=s,this.resolution=_,this.skipFontLoading=o,this.allowedLineEndSpace=c,this.onBeforeWordMeasuring=x,this.onAfterWordMeasuring=S,this.onBeforeWordWriting=k,this.onAfterWordWriting=R,this.content={verticalAlign:l,text:this.textElement.textContent.replace(/[\n\r]+|[\s]{2,}/g," ").trim()},this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.content.style=window.getComputedStyle(this.textElement),this.content.style.fillType="fill"!==f&&"stroke"!==f?"fill":f,this.setCanvasSize(),this.setWords(),this.loadFont(),v=Object.assign(v,{sampler:g}),this.plane.loadCanvas(this.canvas,v,(function(e){t.texture=e,t.texture.shouldUpdate=!1,t.content.fontLoaded&&!t.content.firstWrite&&t.writeTexture()})),this.plane._onAfterResizeCallback=function(){t._onAfterResizeCallback&&t._onAfterResizeCallback(),t.resize()},this.plane.onAfterResize=function(e){return e&&(t._onAfterResizeCallback=e),t.plane}):console.error("TextTexture: can't be created because the WebGL context is undefined"):console.error("TextTexture: can't be created without a plane")}var t,r,i;return t=e,(r=[{key:"setCanvasSize",value:function(){this.pixelRatio=this.plane.renderer.pixelRatio;var e=this.plane.getBoundingRect();this.canvas.width=e.width*this.resolution,this.canvas.height=e.height*this.resolution,this.context.width=e.width,this.context.height=e.height,this.context.scale(this.resolution,this.resolution),this.content.boundingRect=this.textElement.getBoundingClientRect(),this.content.innerBoundingRect={width:this.content.boundingRect.width-parseFloat(this.content.style.paddingLeft)-parseFloat(this.content.style.paddingRight),height:this.content.boundingRect.height-parseFloat(this.content.style.paddingTop)-parseFloat(this.content.style.paddingBottom),top:parseFloat(this.content.style.paddingTop)+(this.content.boundingRect.top-e.top/this.pixelRatio),left:parseFloat(this.content.style.paddingLeft)+(this.content.boundingRect.left-e.left/this.pixelRatio)},this.content.innerBoundingRect.right=this.content.innerBoundingRect.left+this.content.innerBoundingRect.width,this.content.innerBoundingRect.bottom=this.content.innerBoundingRect.top+this.content.innerBoundingRect.height,this.content.innerBoundingRect.width*=this.pixelRatio,this.content.innerBoundingRect.height*=this.pixelRatio,this.content.innerBoundingRect.top*=this.pixelRatio,this.content.innerBoundingRect.left*=this.pixelRatio,this.content.innerBoundingRect.right*=this.pixelRatio,this.content.innerBoundingRect.bottom*=this.pixelRatio}},{key:"setWords",value:function(){var e=this;this.content.words=[];var t=this.content.text.split("-"),r=[],i=t.length;t.forEach((function(e,t){t<i-1?(r.push(e),r.push("-")):r.push(e)})),r.forEach((function(t){var r=t.split(" ");r.forEach((function(t,i){e.content.words.push({word:t,spaceAfter:!("-"===t||i===r.length-1||""===t)})}))}))}},{key:"loadFont",value:function(){var e=this;this.skipFontLoading?this.content.fontLoaded=!0:document.fonts.load(this.content.style.fontStyle+" "+this.content.style.fontWeight+" 1em "+this.content.style.fontFamily).then((function(){e.content.fontLoaded=!0,e.texture&&!e.content.firstWrite&&(e.plane.resize(),e.writeTexture())}))}},{key:"writeTexture",value:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.context.fillStyle=this.content.style.color,this.context.strokeStyle=this.content.style.color,this.context.font=this.content.style.fontStyle+" "+this.content.style.fontWeight+" "+parseFloat(this.content.style.fontSize)*this.plane.renderer.pixelRatio+"px "+this.content.style.fontFamily,this.context.lineHeight=this.content.style.lineHeight;var r=this.content.innerBoundingRect.left,i=parseFloat(this.content.style.lineHeight)*this.pixelRatio,n=parseFloat(this.content.style.fontSize)*this.pixelRatio,s=this.context.measureText(" ").width;this.context.textBaseline="top";var a=i/n,o=.1*n+(a-1)*n*.5;-1!==navigator.userAgent.indexOf("Safari")&&-1===navigator.userAgent.indexOf("Chrome")&&(o=(a-1.4)*n/2);var u={x:r,y:this.content.innerBoundingRect.top+o};!t&&this.lines||(this.lines=[],this.content.words.forEach((function(t,n){"uppercase"===e.content.style.textTransform?t.word=t.word.toUpperCase():"lowercase"===e.content.style.textTransform&&(t.word=t.word.toLowerCase()),e.onBeforeWordMeasuring&&e.onBeforeWordMeasuring(e.context,t,n);var a=e.context.measureText(t.word).width;e.onAfterWordMeasuring&&e.onAfterWordMeasuring(e.context,t,n),(n>0&&u.x+a>e.content.innerBoundingRect.width+e.content.innerBoundingRect.left+s*e.allowedLineEndSpace||""===t.word)&&(u.x=r,u.y+=i),u.x===r&&e.lines.push([]),e.lines[e.lines.length-1].push({word:t.word,wordWidth:a,position:{x:u.x,y:u.y},spaceAfter:t.spaceAfter}),u.x+=a,t.spaceAfter&&(u.x+=s)})));var l={x:0,y:0},h=this.lines[0][0].position.y+this.lines[this.lines.length-1][0].position.y+n;"center"===this.content.verticalAlign?l.y=.5*(this.content.innerBoundingRect.height-h)-.5*o:"bottom"===this.content.verticalAlign&&(l.y=this.content.innerBoundingRect.height-h+.5*o),this.lines.forEach((function(t,i){t.forEach((function(s){var a=t[0].position.x+t[t.length-1].position.x+t[t.length-1].wordWidth-r;"right"===e.content.style.textAlign||"end"===e.content.style.textAlign?l.x=e.content.innerBoundingRect.right-a:"center"===e.content.style.textAlign&&(l.x=(e.content.innerBoundingRect.right-a)/2),e.onBeforeWordWriting&&e.onBeforeWordWriting(e.context,s,{left:s.position.x+l.x,top:s.position.y+l.y,right:s.position.x+l.x+s.wordWidth,bottom:s.position.y+l.y+n},e.content.style,i),"stroke"===e.content.style.fillType?(e.context.miterLimit=2,e.context.strokeText(s.word,s.position.x+l.x,s.position.y+l.y)):e.context.fillText(s.word,s.position.x+l.x,s.position.y+l.y),e.onAfterWordWriting&&e.onAfterWordWriting(e.context,s,l,e.content.style,i)}))})),t&&this.texture.resize(),this.texture.needUpdate(),this.content.firstWrite=!0}},{key:"resize",value:function(){this.texture&&(this.setCanvasSize(),this.writeTexture())}},{key:"dispose",value:function(){this.content={},this.textElement=null,this.plane=null,this.texture=null}}])&&s(t.prototype,r),i&&s(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}()}});